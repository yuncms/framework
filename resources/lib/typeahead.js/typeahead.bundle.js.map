{"version":3,"sources":["typeahead.bundle.js"],"names":["root","factory","define","amd","a0","exports","module","require","jQuery","this","$","_","isMsie","test","navigator","userAgent","match","isBlankString","str","escapeRegExChars","replace","isString","obj","isNumber","isArray","isFunction","isObject","isPlainObject","isUndefined","isElement","nodeType","isJQuery","toStr","s","bind","proxy","each","collection","cb","index","value","map","filter","grep","every","result","key","val","call","some","mixin","extend","identity","x","clone","getIdGenerator","counter","templatify","String","defer","fn","setTimeout","debounce","func","wait","immediate","timeout","later","callNow","context","args","arguments","apply","clearTimeout","throttle","previous","Date","now","remaining","stringify","JSON","noop","VERSION","tokenizers","nonword","whitespace","getObjTokenizer","split","tokenizer","keys","slice","o","tokens","k","concat","LruCache","maxSize","reset","set","get","List","head","tail","prototype","node","tailItem","list","size","remove","hash","moveToFront","prev","next","add","PersistentStorage","LOCAL_STORAGE","window","localStorage","setItem","removeItem","err","namespace","override","prefix","join","ttlKey","keyMatcher","RegExp","ls","_noop","_prefix","_ttlKey","clear","isExpired","_safeSet","name","decode","getItem","ttl","encode","i","len","length","push","gatherMatchingKeys","getTime","parseJSON","Transport","pendingRequestsCount","pendingRequests","maxPendingRequests","sharedCache","cancelled","lastReq","_send","transport","_get","limiter","_cache","cache","setMaxPendingRequests","num","resetCache","_fingerprint","url","type","param","data","fingerprint","jqXhr","that","done","resp","fail","always","onDeckRequestArgs","cancel","SearchIndex","CHILDREN","IDS","datumTokenizer","queryTokenizer","error","identify","bootstrap","datums","trie","datum","id","normalizeTokens","token","chars","ch","shift","newNode","ids","search","query","matches","arrayA","arrayB","ai","bi","intersection","sort","lenArrayA","lenArrayB","getIntersection","array","seen","uniques","unique","all","values","serialize","toLowerCase","Prefetch","prepare","transform","thumbprint","storage","cacheKey","protocol","_settings","dataType","store","location","fromCache","stored","fromNetwork","settings","Remote","cancelLastRequest","oParser","defaults","sorter","initialize","sufficient","local","prefetch","remote","callbackToDeferred","ajax","parsePrefetch","wildcard","rateLimitBy","rateLimitWait","encodeURIComponent","method","parseRemote","deferred","Deferred","resolve","reject","old","Bloodhound","noConflict","__ttAdapter","sync","async","_loadPrefetch","serialized","promise","_initialize","initPromise","force","nonDuplicates","r","l","clearPrefetchCache","clearRemoteCache","ttAdapter","WWW","defaultClassNames","wrapper","input","hint","menu","dataset","suggestion","selectable","empty","open","cursor","highlight","www","classes","css","position","display","top","left","borderColor","boxShadow","opacity","verticalAlign","backgroundColor","inputWithNoHint","zIndex","ltr","right","rtl","backgroundImage","html","c","selectors","v","EventBus","deprecationMap","el","$el","render","cursorchange","select","autocomplete","_trigger","$e","Event","unshift","trigger","before","isDefaultPrevented","deprecatedType","EventEmitter","splitter","nextTick","nextTickFn","setImmediate","getNextTick","onSync","types","on","onAsync","off","_callbacks","callbacks","syncFlush","asyncFlush","getFlush","doc","pattern","tagName","className","wordsOnly","caseSensitive","regex","patterns","regexStr","escapedPatterns","getRegex","traverse","hightlightTextNode","childNode","childNodes","textNode","patternNode","wrapperNode","exec","createElement","splitText","appendChild","cloneNode","parentNode","replaceChild","document","Input","specialKeyCodeMap","$input","$hint","queryWhenFocused","hasFocus","$overflowHelper","visibility","whiteSpace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","wordSpacing","letterSpacing","textIndent","textRendering","textTransform","insertAfter","_checkLanguageDirection","setHint","getHint","clearHint","clearHintIfInvalid","9","27","37","39","13","38","40","normalizeQuery","_onBlur","resetInputValue","_onFocus","_onKeydown","keyName","which","keyCode","_managePreventDefault","_shouldTrigger","_onInput","_setQuery","getInputValue","preventDefault","withModifier","dir","attr","silent","areEquivalent","hasDifferentWhitespace","a","b","onBlur","onFocus","onKeydown","onInput","focus","blur","getLangDir","getQuery","setQuery","setInputValue","hasQueryChangedSinceLastFocus","valIsPrefixOfHint","indexOf","hasOverflow","is","constraint","width","text","isCursorAtEnd","valueLength","selectionStart","range","selection","createRange","moveStart","destroy","altKey","ctrlKey","metaKey","shiftKey","Dataset","nameGenerator","templates","displayFn","notFound","source","limit","displayKey","pending","header","footer","_resetLastSuggestion","addClass","extractData","_overwrite","suggestions","_renderSuggestions","_renderPending","_renderNotFound","_empty","_append","$lastSuggestion","_appendSuggestions","$fragment","_getSuggestionsFragment","children","last","prepend","_getHeader","append","_getFooter","after","template","fragment","createDocumentFragment","_injectQuery","_query","update","canceled","syncCalled","rendered","isEmpty","Menu","$node","datasets","oDataset","find","first","appendTo","_onSelectableClick","currentTarget","_onRendered","toggleClass","_allDatasetsEmpty","_onCleared","_propagate","_getSelectables","_removeCursor","$selectable","getActiveSelectable","removeClass","_ensureVisible","elTop","elBottom","nodeScrollTop","nodeHeight","outerHeight","scrollTop","height","parseInt","onSelectableClick","isOpen","hasClass","close","setLanguageDirection","selectableRelativeToCursor","delta","$selectables","$oldCursor","newIndex","eq","setCursor","getSelectableData","getTopSelectable","isValidUpdate","DefaultMenu","_show","_hide","hide","Typeahead","onFocused","onBlurred","onEnterKeyed","onTabKeyed","onEscKeyed","onUpKeyed","onDownKeyed","onLeftKeyed","onRightKeyed","onQueryChanged","onWhitespaceChanged","eventBus","minLength","enabled","active","activate","_hacks","_onSelectableClicked","_onAsyncRequested","_onAsyncCanceled","_onAsyncReceived","_onDatasetRendered","_onDatasetCleared","_onLangDirChanged","$menu","isActive","hasActive","activeElement","has","stopImmediatePropagation","_updateHint","_onFocused","_minLengthMet","_onBlurred","_onEnterKeyed","_onTabKeyed","_onEscKeyed","_onUpKeyed","moveCursor","_onDownKeyed","_onLeftKeyed","_onRightKeyed","_onQueryChanged","e","_onWhitespaceChanged","_openIfActive","escapedQuery","isEnabled","enable","disable","deactivate","setVal","getVal","$candidate","payload","ctx","methods","ttEach","$els","typeahead","$elOrNull","attrs","classNames","$wrapper","defaultHint","defaultMenu","MenuConstructor","d","removeData","backgroundAttachment","backgroundClip","backgroundOrigin","backgroundPosition","backgroundRepeat","backgroundSize","prop","removeAttr","spellcheck","tabindex","style","prepInput","wrap","parent","t","success","newVal","detach"],"mappings":"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","file":"typeahead.bundle.js","sourcesContent":["/*!\n * typeahead.js 0.11.1\n * https://github.com/twitter/typeahead.js\n * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT\n */\n\n(function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(\"bloodhound\", [ \"jquery\" ], function(a0) {\n            return root[\"Bloodhound\"] = factory(a0);\n        });\n    } else if (typeof exports === \"object\") {\n        module.exports = factory(require(\"jquery\"));\n    } else {\n        root[\"Bloodhound\"] = factory(jQuery);\n    }\n})(this, function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            isElement: function(obj) {\n                return !!(obj && obj.nodeType === 1);\n            },\n            isJQuery: function(obj) {\n                return obj instanceof $;\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            identity: function(x) {\n                return x;\n            },\n            clone: function(obj) {\n                return $.extend(true, {}, obj);\n            },\n            getIdGenerator: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            },\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            stringify: function(val) {\n                return _.isString(val) ? val : JSON.stringify(val);\n            },\n            noop: function() {}\n        };\n    }();\n    var VERSION = \"0.11.1\";\n    var tokenizers = function() {\n        \"use strict\";\n        return {\n            nonword: nonword,\n            whitespace: whitespace,\n            obj: {\n                nonword: getObjTokenizer(nonword),\n                whitespace: getObjTokenizer(whitespace)\n            }\n        };\n        function whitespace(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\s+/) : [];\n        }\n        function nonword(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\W+/) : [];\n        }\n        function getObjTokenizer(tokenizer) {\n            return function setKey(keys) {\n                keys = _.isArray(keys) ? keys : [].slice.call(arguments, 0);\n                return function tokenize(o) {\n                    var tokens = [];\n                    _.each(keys, function(k) {\n                        tokens = tokens.concat(tokenizer(_.toStr(o[k])));\n                    });\n                    return tokens;\n                };\n            };\n        }\n    }();\n    var LruCache = function() {\n        \"use strict\";\n        function LruCache(maxSize) {\n            this.maxSize = _.isNumber(maxSize) ? maxSize : 100;\n            this.reset();\n            if (this.maxSize <= 0) {\n                this.set = this.get = $.noop;\n            }\n        }\n        _.mixin(LruCache.prototype, {\n            set: function set(key, val) {\n                var tailItem = this.list.tail, node;\n                if (this.size >= this.maxSize) {\n                    this.list.remove(tailItem);\n                    delete this.hash[tailItem.key];\n                    this.size--;\n                }\n                if (node = this.hash[key]) {\n                    node.val = val;\n                    this.list.moveToFront(node);\n                } else {\n                    node = new Node(key, val);\n                    this.list.add(node);\n                    this.hash[key] = node;\n                    this.size++;\n                }\n            },\n            get: function get(key) {\n                var node = this.hash[key];\n                if (node) {\n                    this.list.moveToFront(node);\n                    return node.val;\n                }\n            },\n            reset: function reset() {\n                this.size = 0;\n                this.hash = {};\n                this.list = new List();\n            }\n        });\n        function List() {\n            this.head = this.tail = null;\n        }\n        _.mixin(List.prototype, {\n            add: function add(node) {\n                if (this.head) {\n                    node.next = this.head;\n                    this.head.prev = node;\n                }\n                this.head = node;\n                this.tail = this.tail || node;\n            },\n            remove: function remove(node) {\n                node.prev ? node.prev.next = node.next : this.head = node.next;\n                node.next ? node.next.prev = node.prev : this.tail = node.prev;\n            },\n            moveToFront: function(node) {\n                this.remove(node);\n                this.add(node);\n            }\n        });\n        function Node(key, val) {\n            this.key = key;\n            this.val = val;\n            this.prev = this.next = null;\n        }\n        return LruCache;\n    }();\n    var PersistentStorage = function() {\n        \"use strict\";\n        var LOCAL_STORAGE;\n        try {\n            LOCAL_STORAGE = window.localStorage;\n            LOCAL_STORAGE.setItem(\"~~~\", \"!\");\n            LOCAL_STORAGE.removeItem(\"~~~\");\n        } catch (err) {\n            LOCAL_STORAGE = null;\n        }\n        function PersistentStorage(namespace, override) {\n            this.prefix = [ \"__\", namespace, \"__\" ].join(\"\");\n            this.ttlKey = \"__ttl__\";\n            this.keyMatcher = new RegExp(\"^\" + _.escapeRegExChars(this.prefix));\n            this.ls = override || LOCAL_STORAGE;\n            !this.ls && this._noop();\n        }\n        _.mixin(PersistentStorage.prototype, {\n            _prefix: function(key) {\n                return this.prefix + key;\n            },\n            _ttlKey: function(key) {\n                return this._prefix(key) + this.ttlKey;\n            },\n            _noop: function() {\n                this.get = this.set = this.remove = this.clear = this.isExpired = _.noop;\n            },\n            _safeSet: function(key, val) {\n                try {\n                    this.ls.setItem(key, val);\n                } catch (err) {\n                    if (err.name === \"QuotaExceededError\") {\n                        this.clear();\n                        this._noop();\n                    }\n                }\n            },\n            get: function(key) {\n                if (this.isExpired(key)) {\n                    this.remove(key);\n                }\n                return decode(this.ls.getItem(this._prefix(key)));\n            },\n            set: function(key, val, ttl) {\n                if (_.isNumber(ttl)) {\n                    this._safeSet(this._ttlKey(key), encode(now() + ttl));\n                } else {\n                    this.ls.removeItem(this._ttlKey(key));\n                }\n                return this._safeSet(this._prefix(key), encode(val));\n            },\n            remove: function(key) {\n                this.ls.removeItem(this._ttlKey(key));\n                this.ls.removeItem(this._prefix(key));\n                return this;\n            },\n            clear: function() {\n                var i, keys = gatherMatchingKeys(this.keyMatcher);\n                for (i = keys.length; i--; ) {\n                    this.remove(keys[i]);\n                }\n                return this;\n            },\n            isExpired: function(key) {\n                var ttl = decode(this.ls.getItem(this._ttlKey(key)));\n                return _.isNumber(ttl) && now() > ttl ? true : false;\n            }\n        });\n        return PersistentStorage;\n        function now() {\n            return new Date().getTime();\n        }\n        function encode(val) {\n            return JSON.stringify(_.isUndefined(val) ? null : val);\n        }\n        function decode(val) {\n            return $.parseJSON(val);\n        }\n        function gatherMatchingKeys(keyMatcher) {\n            var i, key, keys = [], len = LOCAL_STORAGE.length;\n            for (i = 0; i < len; i++) {\n                if ((key = LOCAL_STORAGE.key(i)).match(keyMatcher)) {\n                    keys.push(key.replace(keyMatcher, \"\"));\n                }\n            }\n            return keys;\n        }\n    }();\n    var Transport = function() {\n        \"use strict\";\n        var pendingRequestsCount = 0, pendingRequests = {}, maxPendingRequests = 6, sharedCache = new LruCache(10);\n        function Transport(o) {\n            o = o || {};\n            this.cancelled = false;\n            this.lastReq = null;\n            this._send = o.transport;\n            this._get = o.limiter ? o.limiter(this._get) : this._get;\n            this._cache = o.cache === false ? new LruCache(0) : sharedCache;\n        }\n        Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {\n            maxPendingRequests = num;\n        };\n        Transport.resetCache = function resetCache() {\n            sharedCache.reset();\n        };\n        _.mixin(Transport.prototype, {\n            _fingerprint: function fingerprint(o) {\n                o = o || {};\n                return o.url + o.type + $.param(o.data || {});\n            },\n            _get: function(o, cb) {\n                var that = this, fingerprint, jqXhr;\n                fingerprint = this._fingerprint(o);\n                if (this.cancelled || fingerprint !== this.lastReq) {\n                    return;\n                }\n                if (jqXhr = pendingRequests[fingerprint]) {\n                    jqXhr.done(done).fail(fail);\n                } else if (pendingRequestsCount < maxPendingRequests) {\n                    pendingRequestsCount++;\n                    pendingRequests[fingerprint] = this._send(o).done(done).fail(fail).always(always);\n                } else {\n                    this.onDeckRequestArgs = [].slice.call(arguments, 0);\n                }\n                function done(resp) {\n                    cb(null, resp);\n                    that._cache.set(fingerprint, resp);\n                }\n                function fail() {\n                    cb(true);\n                }\n                function always() {\n                    pendingRequestsCount--;\n                    delete pendingRequests[fingerprint];\n                    if (that.onDeckRequestArgs) {\n                        that._get.apply(that, that.onDeckRequestArgs);\n                        that.onDeckRequestArgs = null;\n                    }\n                }\n            },\n            get: function(o, cb) {\n                var resp, fingerprint;\n                cb = cb || $.noop;\n                o = _.isString(o) ? {\n                    url: o\n                } : o || {};\n                fingerprint = this._fingerprint(o);\n                this.cancelled = false;\n                this.lastReq = fingerprint;\n                if (resp = this._cache.get(fingerprint)) {\n                    cb(null, resp);\n                } else {\n                    this._get(o, cb);\n                }\n            },\n            cancel: function() {\n                this.cancelled = true;\n            }\n        });\n        return Transport;\n    }();\n    var SearchIndex = window.SearchIndex = function() {\n        \"use strict\";\n        var CHILDREN = \"c\", IDS = \"i\";\n        function SearchIndex(o) {\n            o = o || {};\n            if (!o.datumTokenizer || !o.queryTokenizer) {\n                $.error(\"datumTokenizer and queryTokenizer are both required\");\n            }\n            this.identify = o.identify || _.stringify;\n            this.datumTokenizer = o.datumTokenizer;\n            this.queryTokenizer = o.queryTokenizer;\n            this.reset();\n        }\n        _.mixin(SearchIndex.prototype, {\n            bootstrap: function bootstrap(o) {\n                this.datums = o.datums;\n                this.trie = o.trie;\n            },\n            add: function(data) {\n                var that = this;\n                data = _.isArray(data) ? data : [ data ];\n                _.each(data, function(datum) {\n                    var id, tokens;\n                    that.datums[id = that.identify(datum)] = datum;\n                    tokens = normalizeTokens(that.datumTokenizer(datum));\n                    _.each(tokens, function(token) {\n                        var node, chars, ch;\n                        node = that.trie;\n                        chars = token.split(\"\");\n                        while (ch = chars.shift()) {\n                            node = node[CHILDREN][ch] || (node[CHILDREN][ch] = newNode());\n                            node[IDS].push(id);\n                        }\n                    });\n                });\n            },\n            get: function get(ids) {\n                var that = this;\n                return _.map(ids, function(id) {\n                    return that.datums[id];\n                });\n            },\n            search: function search(query) {\n                var that = this, tokens, matches;\n                tokens = normalizeTokens(this.queryTokenizer(query));\n                _.each(tokens, function(token) {\n                    var node, chars, ch, ids;\n                    if (matches && matches.length === 0) {\n                        return false;\n                    }\n                    node = that.trie;\n                    chars = token.split(\"\");\n                    while (node && (ch = chars.shift())) {\n                        node = node[CHILDREN][ch];\n                    }\n                    if (node && chars.length === 0) {\n                        ids = node[IDS].slice(0);\n                        matches = matches ? getIntersection(matches, ids) : ids;\n                    } else {\n                        matches = [];\n                        return false;\n                    }\n                });\n                return matches ? _.map(unique(matches), function(id) {\n                    return that.datums[id];\n                }) : [];\n            },\n            all: function all() {\n                var values = [];\n                for (var key in this.datums) {\n                    values.push(this.datums[key]);\n                }\n                return values;\n            },\n            reset: function reset() {\n                this.datums = {};\n                this.trie = newNode();\n            },\n            serialize: function serialize() {\n                return {\n                    datums: this.datums,\n                    trie: this.trie\n                };\n            }\n        });\n        return SearchIndex;\n        function normalizeTokens(tokens) {\n            tokens = _.filter(tokens, function(token) {\n                return !!token;\n            });\n            tokens = _.map(tokens, function(token) {\n                return token.toLowerCase();\n            });\n            return tokens;\n        }\n        function newNode() {\n            var node = {};\n            node[IDS] = [];\n            node[CHILDREN] = {};\n            return node;\n        }\n        function unique(array) {\n            var seen = {}, uniques = [];\n            for (var i = 0, len = array.length; i < len; i++) {\n                if (!seen[array[i]]) {\n                    seen[array[i]] = true;\n                    uniques.push(array[i]);\n                }\n            }\n            return uniques;\n        }\n        function getIntersection(arrayA, arrayB) {\n            var ai = 0, bi = 0, intersection = [];\n            arrayA = arrayA.sort();\n            arrayB = arrayB.sort();\n            var lenArrayA = arrayA.length, lenArrayB = arrayB.length;\n            while (ai < lenArrayA && bi < lenArrayB) {\n                if (arrayA[ai] < arrayB[bi]) {\n                    ai++;\n                } else if (arrayA[ai] > arrayB[bi]) {\n                    bi++;\n                } else {\n                    intersection.push(arrayA[ai]);\n                    ai++;\n                    bi++;\n                }\n            }\n            return intersection;\n        }\n    }();\n    var Prefetch = function() {\n        \"use strict\";\n        var keys;\n        keys = {\n            data: \"data\",\n            protocol: \"protocol\",\n            thumbprint: \"thumbprint\"\n        };\n        function Prefetch(o) {\n            this.url = o.url;\n            this.ttl = o.ttl;\n            this.cache = o.cache;\n            this.prepare = o.prepare;\n            this.transform = o.transform;\n            this.transport = o.transport;\n            this.thumbprint = o.thumbprint;\n            this.storage = new PersistentStorage(o.cacheKey);\n        }\n        _.mixin(Prefetch.prototype, {\n            _settings: function settings() {\n                return {\n                    url: this.url,\n                    type: \"GET\",\n                    dataType: \"json\"\n                };\n            },\n            store: function store(data) {\n                if (!this.cache) {\n                    return;\n                }\n                this.storage.set(keys.data, data, this.ttl);\n                this.storage.set(keys.protocol, location.protocol, this.ttl);\n                this.storage.set(keys.thumbprint, this.thumbprint, this.ttl);\n            },\n            fromCache: function fromCache() {\n                var stored = {}, isExpired;\n                if (!this.cache) {\n                    return null;\n                }\n                stored.data = this.storage.get(keys.data);\n                stored.protocol = this.storage.get(keys.protocol);\n                stored.thumbprint = this.storage.get(keys.thumbprint);\n                isExpired = stored.thumbprint !== this.thumbprint || stored.protocol !== location.protocol;\n                return stored.data && !isExpired ? stored.data : null;\n            },\n            fromNetwork: function(cb) {\n                var that = this, settings;\n                if (!cb) {\n                    return;\n                }\n                settings = this.prepare(this._settings());\n                this.transport(settings).fail(onError).done(onResponse);\n                function onError() {\n                    cb(true);\n                }\n                function onResponse(resp) {\n                    cb(null, that.transform(resp));\n                }\n            },\n            clear: function clear() {\n                this.storage.clear();\n                return this;\n            }\n        });\n        return Prefetch;\n    }();\n    var Remote = function() {\n        \"use strict\";\n        function Remote(o) {\n            this.url = o.url;\n            this.prepare = o.prepare;\n            this.transform = o.transform;\n            this.transport = new Transport({\n                cache: o.cache,\n                limiter: o.limiter,\n                transport: o.transport\n            });\n        }\n        _.mixin(Remote.prototype, {\n            _settings: function settings() {\n                return {\n                    url: this.url,\n                    type: \"GET\",\n                    dataType: \"json\"\n                };\n            },\n            get: function get(query, cb) {\n                var that = this, settings;\n                if (!cb) {\n                    return;\n                }\n                query = query || \"\";\n                settings = this.prepare(query, this._settings());\n                return this.transport.get(settings, onResponse);\n                function onResponse(err, resp) {\n                    err ? cb([]) : cb(that.transform(resp));\n                }\n            },\n            cancelLastRequest: function cancelLastRequest() {\n                this.transport.cancel();\n            }\n        });\n        return Remote;\n    }();\n    var oParser = function() {\n        \"use strict\";\n        return function parse(o) {\n            var defaults, sorter;\n            defaults = {\n                initialize: true,\n                identify: _.stringify,\n                datumTokenizer: null,\n                queryTokenizer: null,\n                sufficient: 5,\n                sorter: null,\n                local: [],\n                prefetch: null,\n                remote: null\n            };\n            o = _.mixin(defaults, o || {});\n            !o.datumTokenizer && $.error(\"datumTokenizer is required\");\n            !o.queryTokenizer && $.error(\"queryTokenizer is required\");\n            sorter = o.sorter;\n            o.sorter = sorter ? function(x) {\n                return x.sort(sorter);\n            } : _.identity;\n            o.local = _.isFunction(o.local) ? o.local() : o.local;\n            o.prefetch = parsePrefetch(o.prefetch);\n            o.remote = parseRemote(o.remote);\n            return o;\n        };\n        function parsePrefetch(o) {\n            var defaults;\n            if (!o) {\n                return null;\n            }\n            defaults = {\n                url: null,\n                ttl: 24 * 60 * 60 * 1e3,\n                cache: true,\n                cacheKey: null,\n                thumbprint: \"\",\n                prepare: _.identity,\n                transform: _.identity,\n                transport: null\n            };\n            o = _.isString(o) ? {\n                url: o\n            } : o;\n            o = _.mixin(defaults, o);\n            !o.url && $.error(\"prefetch requires url to be set\");\n            o.transform = o.filter || o.transform;\n            o.cacheKey = o.cacheKey || o.url;\n            o.thumbprint = VERSION + o.thumbprint;\n            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n            return o;\n        }\n        function parseRemote(o) {\n            var defaults;\n            if (!o) {\n                return;\n            }\n            defaults = {\n                url: null,\n                cache: true,\n                prepare: null,\n                replace: null,\n                wildcard: null,\n                limiter: null,\n                rateLimitBy: \"debounce\",\n                rateLimitWait: 300,\n                transform: _.identity,\n                transport: null\n            };\n            o = _.isString(o) ? {\n                url: o\n            } : o;\n            o = _.mixin(defaults, o);\n            !o.url && $.error(\"remote requires url to be set\");\n            o.transform = o.filter || o.transform;\n            o.prepare = toRemotePrepare(o);\n            o.limiter = toLimiter(o);\n            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n            delete o.replace;\n            delete o.wildcard;\n            delete o.rateLimitBy;\n            delete o.rateLimitWait;\n            return o;\n        }\n        function toRemotePrepare(o) {\n            var prepare, replace, wildcard;\n            prepare = o.prepare;\n            replace = o.replace;\n            wildcard = o.wildcard;\n            if (prepare) {\n                return prepare;\n            }\n            if (replace) {\n                prepare = prepareByReplace;\n            } else if (o.wildcard) {\n                prepare = prepareByWildcard;\n            } else {\n                prepare = idenityPrepare;\n            }\n            return prepare;\n            function prepareByReplace(query, settings) {\n                settings.url = replace(settings.url, query);\n                return settings;\n            }\n            function prepareByWildcard(query, settings) {\n                settings.url = settings.url.replace(wildcard, encodeURIComponent(query));\n                return settings;\n            }\n            function idenityPrepare(query, settings) {\n                return settings;\n            }\n        }\n        function toLimiter(o) {\n            var limiter, method, wait;\n            limiter = o.limiter;\n            method = o.rateLimitBy;\n            wait = o.rateLimitWait;\n            if (!limiter) {\n                limiter = /^throttle$/i.test(method) ? throttle(wait) : debounce(wait);\n            }\n            return limiter;\n            function debounce(wait) {\n                return function debounce(fn) {\n                    return _.debounce(fn, wait);\n                };\n            }\n            function throttle(wait) {\n                return function throttle(fn) {\n                    return _.throttle(fn, wait);\n                };\n            }\n        }\n        function callbackToDeferred(fn) {\n            return function wrapper(o) {\n                var deferred = $.Deferred();\n                fn(o, onSuccess, onError);\n                return deferred;\n                function onSuccess(resp) {\n                    _.defer(function() {\n                        deferred.resolve(resp);\n                    });\n                }\n                function onError(err) {\n                    _.defer(function() {\n                        deferred.reject(err);\n                    });\n                }\n            };\n        }\n    }();\n    var Bloodhound = function() {\n        \"use strict\";\n        var old;\n        old = window && window.Bloodhound;\n        function Bloodhound(o) {\n            o = oParser(o);\n            this.sorter = o.sorter;\n            this.identify = o.identify;\n            this.sufficient = o.sufficient;\n            this.local = o.local;\n            this.remote = o.remote ? new Remote(o.remote) : null;\n            this.prefetch = o.prefetch ? new Prefetch(o.prefetch) : null;\n            this.index = new SearchIndex({\n                identify: this.identify,\n                datumTokenizer: o.datumTokenizer,\n                queryTokenizer: o.queryTokenizer\n            });\n            o.initialize !== false && this.initialize();\n        }\n        Bloodhound.noConflict = function noConflict() {\n            window && (window.Bloodhound = old);\n            return Bloodhound;\n        };\n        Bloodhound.tokenizers = tokenizers;\n        _.mixin(Bloodhound.prototype, {\n            __ttAdapter: function ttAdapter() {\n                var that = this;\n                return this.remote ? withAsync : withoutAsync;\n                function withAsync(query, sync, async) {\n                    return that.search(query, sync, async);\n                }\n                function withoutAsync(query, sync) {\n                    return that.search(query, sync);\n                }\n            },\n            _loadPrefetch: function loadPrefetch() {\n                var that = this, deferred, serialized;\n                deferred = $.Deferred();\n                if (!this.prefetch) {\n                    deferred.resolve();\n                } else if (serialized = this.prefetch.fromCache()) {\n                    this.index.bootstrap(serialized);\n                    deferred.resolve();\n                } else {\n                    this.prefetch.fromNetwork(done);\n                }\n                return deferred.promise();\n                function done(err, data) {\n                    if (err) {\n                        return deferred.reject();\n                    }\n                    that.add(data);\n                    that.prefetch.store(that.index.serialize());\n                    deferred.resolve();\n                }\n            },\n            _initialize: function initialize() {\n                var that = this, deferred;\n                this.clear();\n                (this.initPromise = this._loadPrefetch()).done(addLocalToIndex);\n                return this.initPromise;\n                function addLocalToIndex() {\n                    that.add(that.local);\n                }\n            },\n            initialize: function initialize(force) {\n                return !this.initPromise || force ? this._initialize() : this.initPromise;\n            },\n            add: function add(data) {\n                this.index.add(data);\n                return this;\n            },\n            get: function get(ids) {\n                ids = _.isArray(ids) ? ids : [].slice.call(arguments);\n                return this.index.get(ids);\n            },\n            search: function search(query, sync, async) {\n                var that = this, local;\n                local = this.sorter(this.index.search(query));\n                sync(this.remote ? local.slice() : local);\n                if (this.remote && local.length < this.sufficient) {\n                    this.remote.get(query, processRemote);\n                } else if (this.remote) {\n                    this.remote.cancelLastRequest();\n                }\n                return this;\n                function processRemote(remote) {\n                    var nonDuplicates = [];\n                    _.each(remote, function(r) {\n                        !_.some(local, function(l) {\n                            return that.identify(r) === that.identify(l);\n                        }) && nonDuplicates.push(r);\n                    });\n                    async && async(nonDuplicates);\n                }\n            },\n            all: function all() {\n                return this.index.all();\n            },\n            clear: function clear() {\n                this.index.reset();\n                return this;\n            },\n            clearPrefetchCache: function clearPrefetchCache() {\n                this.prefetch && this.prefetch.clear();\n                return this;\n            },\n            clearRemoteCache: function clearRemoteCache() {\n                Transport.resetCache();\n                return this;\n            },\n            ttAdapter: function ttAdapter() {\n                return this.__ttAdapter();\n            }\n        });\n        return Bloodhound;\n    }();\n    return Bloodhound;\n});\n\n(function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(\"typeahead.js\", [ \"jquery\" ], function(a0) {\n            return factory(a0);\n        });\n    } else if (typeof exports === \"object\") {\n        module.exports = factory(require(\"jquery\"));\n    } else {\n        factory(jQuery);\n    }\n})(this, function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            isElement: function(obj) {\n                return !!(obj && obj.nodeType === 1);\n            },\n            isJQuery: function(obj) {\n                return obj instanceof $;\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            identity: function(x) {\n                return x;\n            },\n            clone: function(obj) {\n                return $.extend(true, {}, obj);\n            },\n            getIdGenerator: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            },\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            stringify: function(val) {\n                return _.isString(val) ? val : JSON.stringify(val);\n            },\n            noop: function() {}\n        };\n    }();\n    var WWW = function() {\n        \"use strict\";\n        var defaultClassNames = {\n            wrapper: \"twitter-typeahead\",\n            input: \"tt-input\",\n            hint: \"tt-hint\",\n            menu: \"tt-menu\",\n            dataset: \"tt-dataset\",\n            suggestion: \"tt-suggestion\",\n            selectable: \"tt-selectable\",\n            empty: \"tt-empty\",\n            open: \"tt-open\",\n            cursor: \"tt-cursor\",\n            highlight: \"tt-highlight\"\n        };\n        return build;\n        function build(o) {\n            var www, classes;\n            classes = _.mixin({}, defaultClassNames, o);\n            www = {\n                css: buildCss(),\n                classes: classes,\n                html: buildHtml(classes),\n                selectors: buildSelectors(classes)\n            };\n            return {\n                css: www.css,\n                html: www.html,\n                classes: www.classes,\n                selectors: www.selectors,\n                mixin: function(o) {\n                    _.mixin(o, www);\n                }\n            };\n        }\n        function buildHtml(c) {\n            return {\n                wrapper: '<span class=\"' + c.wrapper + '\"></span>',\n                menu: '<div class=\"' + c.menu + '\"></div>'\n            };\n        }\n        function buildSelectors(classes) {\n            var selectors = {};\n            _.each(classes, function(v, k) {\n                selectors[k] = \".\" + v;\n            });\n            return selectors;\n        }\n        function buildCss() {\n            var css = {\n                wrapper: {\n                    position: \"relative\",\n                    display: \"inline-block\"\n                },\n                hint: {\n                    position: \"absolute\",\n                    top: \"0\",\n                    left: \"0\",\n                    borderColor: \"transparent\",\n                    boxShadow: \"none\",\n                    opacity: \"1\"\n                },\n                input: {\n                    position: \"relative\",\n                    verticalAlign: \"top\",\n                    backgroundColor: \"transparent\"\n                },\n                inputWithNoHint: {\n                    position: \"relative\",\n                    verticalAlign: \"top\"\n                },\n                menu: {\n                    position: \"absolute\",\n                    top: \"100%\",\n                    left: \"0\",\n                    zIndex: \"100\",\n                    display: \"none\"\n                },\n                ltr: {\n                    left: \"0\",\n                    right: \"auto\"\n                },\n                rtl: {\n                    left: \"auto\",\n                    right: \" 0\"\n                }\n            };\n            if (_.isMsie()) {\n                _.mixin(css.input, {\n                    backgroundImage: \"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)\"\n                });\n            }\n            return css;\n        }\n    }();\n    var EventBus = function() {\n        \"use strict\";\n        var namespace, deprecationMap;\n        namespace = \"typeahead:\";\n        deprecationMap = {\n            render: \"rendered\",\n            cursorchange: \"cursorchanged\",\n            select: \"selected\",\n            autocomplete: \"autocompleted\"\n        };\n        function EventBus(o) {\n            if (!o || !o.el) {\n                $.error(\"EventBus initialized without el\");\n            }\n            this.$el = $(o.el);\n        }\n        _.mixin(EventBus.prototype, {\n            _trigger: function(type, args) {\n                var $e;\n                $e = $.Event(namespace + type);\n                (args = args || []).unshift($e);\n                this.$el.trigger.apply(this.$el, args);\n                return $e;\n            },\n            before: function(type) {\n                var args, $e;\n                args = [].slice.call(arguments, 1);\n                $e = this._trigger(\"before\" + type, args);\n                return $e.isDefaultPrevented();\n            },\n            trigger: function(type) {\n                var deprecatedType;\n                this._trigger(type, [].slice.call(arguments, 1));\n                if (deprecatedType = deprecationMap[type]) {\n                    this._trigger(deprecatedType, [].slice.call(arguments, 1));\n                }\n            }\n        });\n        return EventBus;\n    }();\n    var EventEmitter = function() {\n        \"use strict\";\n        var splitter = /\\s+/, nextTick = getNextTick();\n        return {\n            onSync: onSync,\n            onAsync: onAsync,\n            off: off,\n            trigger: trigger\n        };\n        function on(method, types, cb, context) {\n            var type;\n            if (!cb) {\n                return this;\n            }\n            types = types.split(splitter);\n            cb = context ? bindContext(cb, context) : cb;\n            this._callbacks = this._callbacks || {};\n            while (type = types.shift()) {\n                this._callbacks[type] = this._callbacks[type] || {\n                    sync: [],\n                    async: []\n                };\n                this._callbacks[type][method].push(cb);\n            }\n            return this;\n        }\n        function onAsync(types, cb, context) {\n            return on.call(this, \"async\", types, cb, context);\n        }\n        function onSync(types, cb, context) {\n            return on.call(this, \"sync\", types, cb, context);\n        }\n        function off(types) {\n            var type;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            while (type = types.shift()) {\n                delete this._callbacks[type];\n            }\n            return this;\n        }\n        function trigger(types) {\n            var type, callbacks, args, syncFlush, asyncFlush;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            args = [].slice.call(arguments, 1);\n            while ((type = types.shift()) && (callbacks = this._callbacks[type])) {\n                syncFlush = getFlush(callbacks.sync, this, [ type ].concat(args));\n                asyncFlush = getFlush(callbacks.async, this, [ type ].concat(args));\n                syncFlush() && nextTick(asyncFlush);\n            }\n            return this;\n        }\n        function getFlush(callbacks, context, args) {\n            return flush;\n            function flush() {\n                var cancelled;\n                for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {\n                    cancelled = callbacks[i].apply(context, args) === false;\n                }\n                return !cancelled;\n            }\n        }\n        function getNextTick() {\n            var nextTickFn;\n            if (window.setImmediate) {\n                nextTickFn = function nextTickSetImmediate(fn) {\n                    setImmediate(function() {\n                        fn();\n                    });\n                };\n            } else {\n                nextTickFn = function nextTickSetTimeout(fn) {\n                    setTimeout(function() {\n                        fn();\n                    }, 0);\n                };\n            }\n            return nextTickFn;\n        }\n        function bindContext(fn, context) {\n            return fn.bind ? fn.bind(context) : function() {\n                fn.apply(context, [].slice.call(arguments, 0));\n            };\n        }\n    }();\n    var highlight = function(doc) {\n        \"use strict\";\n        var defaults = {\n            node: null,\n            pattern: null,\n            tagName: \"strong\",\n            className: null,\n            wordsOnly: false,\n            caseSensitive: false\n        };\n        return function hightlight(o) {\n            var regex;\n            o = _.mixin({}, defaults, o);\n            if (!o.node || !o.pattern) {\n                return;\n            }\n            o.pattern = _.isArray(o.pattern) ? o.pattern : [ o.pattern ];\n            regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly);\n            traverse(o.node, hightlightTextNode);\n            function hightlightTextNode(textNode) {\n                var match, patternNode, wrapperNode;\n                if (match = regex.exec(textNode.data)) {\n                    wrapperNode = doc.createElement(o.tagName);\n                    o.className && (wrapperNode.className = o.className);\n                    patternNode = textNode.splitText(match.index);\n                    patternNode.splitText(match[0].length);\n                    wrapperNode.appendChild(patternNode.cloneNode(true));\n                    textNode.parentNode.replaceChild(wrapperNode, patternNode);\n                }\n                return !!match;\n            }\n            function traverse(el, hightlightTextNode) {\n                var childNode, TEXT_NODE_TYPE = 3;\n                for (var i = 0; i < el.childNodes.length; i++) {\n                    childNode = el.childNodes[i];\n                    if (childNode.nodeType === TEXT_NODE_TYPE) {\n                        i += hightlightTextNode(childNode) ? 1 : 0;\n                    } else {\n                        traverse(childNode, hightlightTextNode);\n                    }\n                }\n            }\n        };\n        function getRegex(patterns, caseSensitive, wordsOnly) {\n            var escapedPatterns = [], regexStr;\n            for (var i = 0, len = patterns.length; i < len; i++) {\n                escapedPatterns.push(_.escapeRegExChars(patterns[i]));\n            }\n            regexStr = wordsOnly ? \"\\\\b(\" + escapedPatterns.join(\"|\") + \")\\\\b\" : \"(\" + escapedPatterns.join(\"|\") + \")\";\n            return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, \"i\");\n        }\n    }(window.document);\n    var Input = function() {\n        \"use strict\";\n        var specialKeyCodeMap;\n        specialKeyCodeMap = {\n            9: \"tab\",\n            27: \"esc\",\n            37: \"left\",\n            39: \"right\",\n            13: \"enter\",\n            38: \"up\",\n            40: \"down\"\n        };\n        function Input(o, www) {\n            o = o || {};\n            if (!o.input) {\n                $.error(\"input is missing\");\n            }\n            www.mixin(this);\n            this.$hint = $(o.hint);\n            this.$input = $(o.input);\n            this.query = this.$input.val();\n            this.queryWhenFocused = this.hasFocus() ? this.query : null;\n            this.$overflowHelper = buildOverflowHelper(this.$input);\n            this._checkLanguageDirection();\n            if (this.$hint.length === 0) {\n                this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;\n            }\n        }\n        Input.normalizeQuery = function(str) {\n            return _.toStr(str).replace(/^\\s*/g, \"\").replace(/\\s{2,}/g, \" \");\n        };\n        _.mixin(Input.prototype, EventEmitter, {\n            _onBlur: function onBlur() {\n                this.resetInputValue();\n                this.trigger(\"blurred\");\n            },\n            _onFocus: function onFocus() {\n                this.queryWhenFocused = this.query;\n                this.trigger(\"focused\");\n            },\n            _onKeydown: function onKeydown($e) {\n                var keyName = specialKeyCodeMap[$e.which || $e.keyCode];\n                this._managePreventDefault(keyName, $e);\n                if (keyName && this._shouldTrigger(keyName, $e)) {\n                    this.trigger(keyName + \"Keyed\", $e);\n                }\n            },\n            _onInput: function onInput() {\n                this._setQuery(this.getInputValue());\n                this.clearHintIfInvalid();\n                this._checkLanguageDirection();\n            },\n            _managePreventDefault: function managePreventDefault(keyName, $e) {\n                var preventDefault;\n                switch (keyName) {\n                  case \"up\":\n                  case \"down\":\n                    preventDefault = !withModifier($e);\n                    break;\n\n                  default:\n                    preventDefault = false;\n                }\n                preventDefault && $e.preventDefault();\n            },\n            _shouldTrigger: function shouldTrigger(keyName, $e) {\n                var trigger;\n                switch (keyName) {\n                  case \"tab\":\n                    trigger = !withModifier($e);\n                    break;\n\n                  default:\n                    trigger = true;\n                }\n                return trigger;\n            },\n            _checkLanguageDirection: function checkLanguageDirection() {\n                var dir = (this.$input.css(\"direction\") || \"ltr\").toLowerCase();\n                if (this.dir !== dir) {\n                    this.dir = dir;\n                    this.$hint.attr(\"dir\", dir);\n                    this.trigger(\"langDirChanged\", dir);\n                }\n            },\n            _setQuery: function setQuery(val, silent) {\n                var areEquivalent, hasDifferentWhitespace;\n                areEquivalent = areQueriesEquivalent(val, this.query);\n                hasDifferentWhitespace = areEquivalent ? this.query.length !== val.length : false;\n                this.query = val;\n                if (!silent && !areEquivalent) {\n                    this.trigger(\"queryChanged\", this.query);\n                } else if (!silent && hasDifferentWhitespace) {\n                    this.trigger(\"whitespaceChanged\", this.query);\n                }\n            },\n            bind: function() {\n                var that = this, onBlur, onFocus, onKeydown, onInput;\n                onBlur = _.bind(this._onBlur, this);\n                onFocus = _.bind(this._onFocus, this);\n                onKeydown = _.bind(this._onKeydown, this);\n                onInput = _.bind(this._onInput, this);\n                this.$input.on(\"blur.tt\", onBlur).on(\"focus.tt\", onFocus).on(\"keydown.tt\", onKeydown);\n                if (!_.isMsie() || _.isMsie() > 9) {\n                    this.$input.on(\"input.tt\", onInput);\n                } else {\n                    this.$input.on(\"keydown.tt keypress.tt cut.tt paste.tt\", function($e) {\n                        if (specialKeyCodeMap[$e.which || $e.keyCode]) {\n                            return;\n                        }\n                        _.defer(_.bind(that._onInput, that, $e));\n                    });\n                }\n                return this;\n            },\n            focus: function focus() {\n                this.$input.focus();\n            },\n            blur: function blur() {\n                this.$input.blur();\n            },\n            getLangDir: function getLangDir() {\n                return this.dir;\n            },\n            getQuery: function getQuery() {\n                return this.query || \"\";\n            },\n            setQuery: function setQuery(val, silent) {\n                this.setInputValue(val);\n                this._setQuery(val, silent);\n            },\n            hasQueryChangedSinceLastFocus: function hasQueryChangedSinceLastFocus() {\n                return this.query !== this.queryWhenFocused;\n            },\n            getInputValue: function getInputValue() {\n                return this.$input.val();\n            },\n            setInputValue: function setInputValue(value) {\n                this.$input.val(value);\n                this.clearHintIfInvalid();\n                this._checkLanguageDirection();\n            },\n            resetInputValue: function resetInputValue() {\n                this.setInputValue(this.query);\n            },\n            getHint: function getHint() {\n                return this.$hint.val();\n            },\n            setHint: function setHint(value) {\n                this.$hint.val(value);\n            },\n            clearHint: function clearHint() {\n                this.setHint(\"\");\n            },\n            clearHintIfInvalid: function clearHintIfInvalid() {\n                var val, hint, valIsPrefixOfHint, isValid;\n                val = this.getInputValue();\n                hint = this.getHint();\n                valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;\n                isValid = val !== \"\" && valIsPrefixOfHint && !this.hasOverflow();\n                !isValid && this.clearHint();\n            },\n            hasFocus: function hasFocus() {\n                return this.$input.is(\":focus\");\n            },\n            hasOverflow: function hasOverflow() {\n                var constraint = this.$input.width() - 2;\n                this.$overflowHelper.text(this.getInputValue());\n                return this.$overflowHelper.width() >= constraint;\n            },\n            isCursorAtEnd: function() {\n                var valueLength, selectionStart, range;\n                valueLength = this.$input.val().length;\n                selectionStart = this.$input[0].selectionStart;\n                if (_.isNumber(selectionStart)) {\n                    return selectionStart === valueLength;\n                } else if (document.selection) {\n                    range = document.selection.createRange();\n                    range.moveStart(\"character\", -valueLength);\n                    return valueLength === range.text.length;\n                }\n                return true;\n            },\n            destroy: function destroy() {\n                this.$hint.off(\".tt\");\n                this.$input.off(\".tt\");\n                this.$overflowHelper.remove();\n                this.$hint = this.$input = this.$overflowHelper = $(\"<div>\");\n            }\n        });\n        return Input;\n        function buildOverflowHelper($input) {\n            return $('<pre aria-hidden=\"true\"></pre>').css({\n                position: \"absolute\",\n                visibility: \"hidden\",\n                whiteSpace: \"pre\",\n                fontFamily: $input.css(\"font-family\"),\n                fontSize: $input.css(\"font-size\"),\n                fontStyle: $input.css(\"font-style\"),\n                fontVariant: $input.css(\"font-variant\"),\n                fontWeight: $input.css(\"font-weight\"),\n                wordSpacing: $input.css(\"word-spacing\"),\n                letterSpacing: $input.css(\"letter-spacing\"),\n                textIndent: $input.css(\"text-indent\"),\n                textRendering: $input.css(\"text-rendering\"),\n                textTransform: $input.css(\"text-transform\")\n            }).insertAfter($input);\n        }\n        function areQueriesEquivalent(a, b) {\n            return Input.normalizeQuery(a) === Input.normalizeQuery(b);\n        }\n        function withModifier($e) {\n            return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;\n        }\n    }();\n    var Dataset = function() {\n        \"use strict\";\n        var keys, nameGenerator;\n        keys = {\n            val: \"tt-selectable-display\",\n            obj: \"tt-selectable-object\"\n        };\n        nameGenerator = _.getIdGenerator();\n        function Dataset(o, www) {\n            o = o || {};\n            o.templates = o.templates || {};\n            o.templates.notFound = o.templates.notFound || o.templates.empty;\n            if (!o.source) {\n                $.error(\"missing source\");\n            }\n            if (!o.node) {\n                $.error(\"missing node\");\n            }\n            if (o.name && !isValidName(o.name)) {\n                $.error(\"invalid dataset name: \" + o.name);\n            }\n            www.mixin(this);\n            this.highlight = !!o.highlight;\n            this.name = o.name || nameGenerator();\n            this.limit = o.limit || 5;\n            this.displayFn = getDisplayFn(o.display || o.displayKey);\n            this.templates = getTemplates(o.templates, this.displayFn);\n            this.source = o.source.__ttAdapter ? o.source.__ttAdapter() : o.source;\n            this.async = _.isUndefined(o.async) ? this.source.length > 2 : !!o.async;\n            this._resetLastSuggestion();\n            this.$el = $(o.node).addClass(this.classes.dataset).addClass(this.classes.dataset + \"-\" + this.name);\n        }\n        Dataset.extractData = function extractData(el) {\n            var $el = $(el);\n            if ($el.data(keys.obj)) {\n                return {\n                    val: $el.data(keys.val) || \"\",\n                    obj: $el.data(keys.obj) || null\n                };\n            }\n            return null;\n        };\n        _.mixin(Dataset.prototype, EventEmitter, {\n            _overwrite: function overwrite(query, suggestions) {\n                suggestions = suggestions || [];\n                if (suggestions.length) {\n                    this._renderSuggestions(query, suggestions);\n                } else if (this.async && this.templates.pending) {\n                    this._renderPending(query);\n                } else if (!this.async && this.templates.notFound) {\n                    this._renderNotFound(query);\n                } else {\n                    this._empty();\n                }\n                this.trigger(\"rendered\", this.name, suggestions, false);\n            },\n            _append: function append(query, suggestions) {\n                suggestions = suggestions || [];\n                if (suggestions.length && this.$lastSuggestion.length) {\n                    this._appendSuggestions(query, suggestions);\n                } else if (suggestions.length) {\n                    this._renderSuggestions(query, suggestions);\n                } else if (!this.$lastSuggestion.length && this.templates.notFound) {\n                    this._renderNotFound(query);\n                }\n                this.trigger(\"rendered\", this.name, suggestions, true);\n            },\n            _renderSuggestions: function renderSuggestions(query, suggestions) {\n                var $fragment;\n                $fragment = this._getSuggestionsFragment(query, suggestions);\n                this.$lastSuggestion = $fragment.children().last();\n                this.$el.html($fragment).prepend(this._getHeader(query, suggestions)).append(this._getFooter(query, suggestions));\n            },\n            _appendSuggestions: function appendSuggestions(query, suggestions) {\n                var $fragment, $lastSuggestion;\n                $fragment = this._getSuggestionsFragment(query, suggestions);\n                $lastSuggestion = $fragment.children().last();\n                this.$lastSuggestion.after($fragment);\n                this.$lastSuggestion = $lastSuggestion;\n            },\n            _renderPending: function renderPending(query) {\n                var template = this.templates.pending;\n                this._resetLastSuggestion();\n                template && this.$el.html(template({\n                    query: query,\n                    dataset: this.name\n                }));\n            },\n            _renderNotFound: function renderNotFound(query) {\n                var template = this.templates.notFound;\n                this._resetLastSuggestion();\n                template && this.$el.html(template({\n                    query: query,\n                    dataset: this.name\n                }));\n            },\n            _empty: function empty() {\n                this.$el.empty();\n                this._resetLastSuggestion();\n            },\n            _getSuggestionsFragment: function getSuggestionsFragment(query, suggestions) {\n                var that = this, fragment;\n                fragment = document.createDocumentFragment();\n                _.each(suggestions, function getSuggestionNode(suggestion) {\n                    var $el, context;\n                    context = that._injectQuery(query, suggestion);\n                    $el = $(that.templates.suggestion(context)).data(keys.obj, suggestion).data(keys.val, that.displayFn(suggestion)).addClass(that.classes.suggestion + \" \" + that.classes.selectable);\n                    fragment.appendChild($el[0]);\n                });\n                this.highlight && highlight({\n                    className: this.classes.highlight,\n                    node: fragment,\n                    pattern: query\n                });\n                return $(fragment);\n            },\n            _getFooter: function getFooter(query, suggestions) {\n                return this.templates.footer ? this.templates.footer({\n                    query: query,\n                    suggestions: suggestions,\n                    dataset: this.name\n                }) : null;\n            },\n            _getHeader: function getHeader(query, suggestions) {\n                return this.templates.header ? this.templates.header({\n                    query: query,\n                    suggestions: suggestions,\n                    dataset: this.name\n                }) : null;\n            },\n            _resetLastSuggestion: function resetLastSuggestion() {\n                this.$lastSuggestion = $();\n            },\n            _injectQuery: function injectQuery(query, obj) {\n                return _.isObject(obj) ? _.mixin({\n                    _query: query\n                }, obj) : obj;\n            },\n            update: function update(query) {\n                var that = this, canceled = false, syncCalled = false, rendered = 0;\n                this.cancel();\n                this.cancel = function cancel() {\n                    canceled = true;\n                    that.cancel = $.noop;\n                    that.async && that.trigger(\"asyncCanceled\", query);\n                };\n                this.source(query, sync, async);\n                !syncCalled && sync([]);\n                function sync(suggestions) {\n                    if (syncCalled) {\n                        return;\n                    }\n                    syncCalled = true;\n                    suggestions = (suggestions || []).slice(0, that.limit);\n                    rendered = suggestions.length;\n                    that._overwrite(query, suggestions);\n                    if (rendered < that.limit && that.async) {\n                        that.trigger(\"asyncRequested\", query);\n                    }\n                }\n                function async(suggestions) {\n                    suggestions = suggestions || [];\n                    if (!canceled && rendered < that.limit) {\n                        that.cancel = $.noop;\n                        rendered += suggestions.length;\n                        that._append(query, suggestions.slice(0, that.limit - rendered));\n                        that.async && that.trigger(\"asyncReceived\", query);\n                    }\n                }\n            },\n            cancel: $.noop,\n            clear: function clear() {\n                this._empty();\n                this.cancel();\n                this.trigger(\"cleared\");\n            },\n            isEmpty: function isEmpty() {\n                return this.$el.is(\":empty\");\n            },\n            destroy: function destroy() {\n                this.$el = $(\"<div>\");\n            }\n        });\n        return Dataset;\n        function getDisplayFn(display) {\n            display = display || _.stringify;\n            return _.isFunction(display) ? display : displayFn;\n            function displayFn(obj) {\n                return obj[display];\n            }\n        }\n        function getTemplates(templates, displayFn) {\n            return {\n                notFound: templates.notFound && _.templatify(templates.notFound),\n                pending: templates.pending && _.templatify(templates.pending),\n                header: templates.header && _.templatify(templates.header),\n                footer: templates.footer && _.templatify(templates.footer),\n                suggestion: templates.suggestion || suggestionTemplate\n            };\n            function suggestionTemplate(context) {\n                return $(\"<div>\").text(displayFn(context));\n            }\n        }\n        function isValidName(str) {\n            return /^[_a-zA-Z0-9-]+$/.test(str);\n        }\n    }();\n    var Menu = function() {\n        \"use strict\";\n        function Menu(o, www) {\n            var that = this;\n            o = o || {};\n            if (!o.node) {\n                $.error(\"node is required\");\n            }\n            www.mixin(this);\n            this.$node = $(o.node);\n            this.query = null;\n            this.datasets = _.map(o.datasets, initializeDataset);\n            function initializeDataset(oDataset) {\n                var node = that.$node.find(oDataset.node).first();\n                oDataset.node = node.length ? node : $(\"<div>\").appendTo(that.$node);\n                return new Dataset(oDataset, www);\n            }\n        }\n        _.mixin(Menu.prototype, EventEmitter, {\n            _onSelectableClick: function onSelectableClick($e) {\n                this.trigger(\"selectableClicked\", $($e.currentTarget));\n            },\n            _onRendered: function onRendered(type, dataset, suggestions, async) {\n                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n                this.trigger(\"datasetRendered\", dataset, suggestions, async);\n            },\n            _onCleared: function onCleared() {\n                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n                this.trigger(\"datasetCleared\");\n            },\n            _propagate: function propagate() {\n                this.trigger.apply(this, arguments);\n            },\n            _allDatasetsEmpty: function allDatasetsEmpty() {\n                return _.every(this.datasets, isDatasetEmpty);\n                function isDatasetEmpty(dataset) {\n                    return dataset.isEmpty();\n                }\n            },\n            _getSelectables: function getSelectables() {\n                return this.$node.find(this.selectors.selectable);\n            },\n            _removeCursor: function _removeCursor() {\n                var $selectable = this.getActiveSelectable();\n                $selectable && $selectable.removeClass(this.classes.cursor);\n            },\n            _ensureVisible: function ensureVisible($el) {\n                var elTop, elBottom, nodeScrollTop, nodeHeight;\n                elTop = $el.position().top;\n                elBottom = elTop + $el.outerHeight(true);\n                nodeScrollTop = this.$node.scrollTop();\n                nodeHeight = this.$node.height() + parseInt(this.$node.css(\"paddingTop\"), 10) + parseInt(this.$node.css(\"paddingBottom\"), 10);\n                if (elTop < 0) {\n                    this.$node.scrollTop(nodeScrollTop + elTop);\n                } else if (nodeHeight < elBottom) {\n                    this.$node.scrollTop(nodeScrollTop + (elBottom - nodeHeight));\n                }\n            },\n            bind: function() {\n                var that = this, onSelectableClick;\n                onSelectableClick = _.bind(this._onSelectableClick, this);\n                this.$node.on(\"click.tt\", this.selectors.selectable, onSelectableClick);\n                _.each(this.datasets, function(dataset) {\n                    dataset.onSync(\"asyncRequested\", that._propagate, that).onSync(\"asyncCanceled\", that._propagate, that).onSync(\"asyncReceived\", that._propagate, that).onSync(\"rendered\", that._onRendered, that).onSync(\"cleared\", that._onCleared, that);\n                });\n                return this;\n            },\n            isOpen: function isOpen() {\n                return this.$node.hasClass(this.classes.open);\n            },\n            open: function open() {\n                this.$node.addClass(this.classes.open);\n            },\n            close: function close() {\n                this.$node.removeClass(this.classes.open);\n                this._removeCursor();\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$node.attr(\"dir\", dir);\n            },\n            selectableRelativeToCursor: function selectableRelativeToCursor(delta) {\n                var $selectables, $oldCursor, oldIndex, newIndex;\n                $oldCursor = this.getActiveSelectable();\n                $selectables = this._getSelectables();\n                oldIndex = $oldCursor ? $selectables.index($oldCursor) : -1;\n                newIndex = oldIndex + delta;\n                newIndex = (newIndex + 1) % ($selectables.length + 1) - 1;\n                newIndex = newIndex < -1 ? $selectables.length - 1 : newIndex;\n                return newIndex === -1 ? null : $selectables.eq(newIndex);\n            },\n            setCursor: function setCursor($selectable) {\n                this._removeCursor();\n                if ($selectable = $selectable && $selectable.first()) {\n                    $selectable.addClass(this.classes.cursor);\n                    this._ensureVisible($selectable);\n                }\n            },\n            getSelectableData: function getSelectableData($el) {\n                return $el && $el.length ? Dataset.extractData($el) : null;\n            },\n            getActiveSelectable: function getActiveSelectable() {\n                var $selectable = this._getSelectables().filter(this.selectors.cursor).first();\n                return $selectable.length ? $selectable : null;\n            },\n            getTopSelectable: function getTopSelectable() {\n                var $selectable = this._getSelectables().first();\n                return $selectable.length ? $selectable : null;\n            },\n            update: function update(query) {\n                var isValidUpdate = query !== this.query;\n                if (isValidUpdate) {\n                    this.query = query;\n                    _.each(this.datasets, updateDataset);\n                }\n                return isValidUpdate;\n                function updateDataset(dataset) {\n                    dataset.update(query);\n                }\n            },\n            empty: function empty() {\n                _.each(this.datasets, clearDataset);\n                this.query = null;\n                this.$node.addClass(this.classes.empty);\n                function clearDataset(dataset) {\n                    dataset.clear();\n                }\n            },\n            destroy: function destroy() {\n                this.$node.off(\".tt\");\n                this.$node = $(\"<div>\");\n                _.each(this.datasets, destroyDataset);\n                function destroyDataset(dataset) {\n                    dataset.destroy();\n                }\n            }\n        });\n        return Menu;\n    }();\n    var DefaultMenu = function() {\n        \"use strict\";\n        var s = Menu.prototype;\n        function DefaultMenu() {\n            Menu.apply(this, [].slice.call(arguments, 0));\n        }\n        _.mixin(DefaultMenu.prototype, Menu.prototype, {\n            open: function open() {\n                !this._allDatasetsEmpty() && this._show();\n                return s.open.apply(this, [].slice.call(arguments, 0));\n            },\n            close: function close() {\n                this._hide();\n                return s.close.apply(this, [].slice.call(arguments, 0));\n            },\n            _onRendered: function onRendered() {\n                if (this._allDatasetsEmpty()) {\n                    this._hide();\n                } else {\n                    this.isOpen() && this._show();\n                }\n                return s._onRendered.apply(this, [].slice.call(arguments, 0));\n            },\n            _onCleared: function onCleared() {\n                if (this._allDatasetsEmpty()) {\n                    this._hide();\n                } else {\n                    this.isOpen() && this._show();\n                }\n                return s._onCleared.apply(this, [].slice.call(arguments, 0));\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$node.css(dir === \"ltr\" ? this.css.ltr : this.css.rtl);\n                return s.setLanguageDirection.apply(this, [].slice.call(arguments, 0));\n            },\n            _hide: function hide() {\n                this.$node.hide();\n            },\n            _show: function show() {\n                this.$node.css(\"display\", \"block\");\n            }\n        });\n        return DefaultMenu;\n    }();\n    var Typeahead = function() {\n        \"use strict\";\n        function Typeahead(o, www) {\n            var onFocused, onBlurred, onEnterKeyed, onTabKeyed, onEscKeyed, onUpKeyed, onDownKeyed, onLeftKeyed, onRightKeyed, onQueryChanged, onWhitespaceChanged;\n            o = o || {};\n            if (!o.input) {\n                $.error(\"missing input\");\n            }\n            if (!o.menu) {\n                $.error(\"missing menu\");\n            }\n            if (!o.eventBus) {\n                $.error(\"missing event bus\");\n            }\n            www.mixin(this);\n            this.eventBus = o.eventBus;\n            this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;\n            this.input = o.input;\n            this.menu = o.menu;\n            this.enabled = true;\n            this.active = false;\n            this.input.hasFocus() && this.activate();\n            this.dir = this.input.getLangDir();\n            this._hacks();\n            this.menu.bind().onSync(\"selectableClicked\", this._onSelectableClicked, this).onSync(\"asyncRequested\", this._onAsyncRequested, this).onSync(\"asyncCanceled\", this._onAsyncCanceled, this).onSync(\"asyncReceived\", this._onAsyncReceived, this).onSync(\"datasetRendered\", this._onDatasetRendered, this).onSync(\"datasetCleared\", this._onDatasetCleared, this);\n            onFocused = c(this, \"activate\", \"open\", \"_onFocused\");\n            onBlurred = c(this, \"deactivate\", \"_onBlurred\");\n            onEnterKeyed = c(this, \"isActive\", \"isOpen\", \"_onEnterKeyed\");\n            onTabKeyed = c(this, \"isActive\", \"isOpen\", \"_onTabKeyed\");\n            onEscKeyed = c(this, \"isActive\", \"_onEscKeyed\");\n            onUpKeyed = c(this, \"isActive\", \"open\", \"_onUpKeyed\");\n            onDownKeyed = c(this, \"isActive\", \"open\", \"_onDownKeyed\");\n            onLeftKeyed = c(this, \"isActive\", \"isOpen\", \"_onLeftKeyed\");\n            onRightKeyed = c(this, \"isActive\", \"isOpen\", \"_onRightKeyed\");\n            onQueryChanged = c(this, \"_openIfActive\", \"_onQueryChanged\");\n            onWhitespaceChanged = c(this, \"_openIfActive\", \"_onWhitespaceChanged\");\n            this.input.bind().onSync(\"focused\", onFocused, this).onSync(\"blurred\", onBlurred, this).onSync(\"enterKeyed\", onEnterKeyed, this).onSync(\"tabKeyed\", onTabKeyed, this).onSync(\"escKeyed\", onEscKeyed, this).onSync(\"upKeyed\", onUpKeyed, this).onSync(\"downKeyed\", onDownKeyed, this).onSync(\"leftKeyed\", onLeftKeyed, this).onSync(\"rightKeyed\", onRightKeyed, this).onSync(\"queryChanged\", onQueryChanged, this).onSync(\"whitespaceChanged\", onWhitespaceChanged, this).onSync(\"langDirChanged\", this._onLangDirChanged, this);\n        }\n        _.mixin(Typeahead.prototype, {\n            _hacks: function hacks() {\n                var $input, $menu;\n                $input = this.input.$input || $(\"<div>\");\n                $menu = this.menu.$node || $(\"<div>\");\n                $input.on(\"blur.tt\", function($e) {\n                    var active, isActive, hasActive;\n                    active = document.activeElement;\n                    isActive = $menu.is(active);\n                    hasActive = $menu.has(active).length > 0;\n                    if (_.isMsie() && (isActive || hasActive)) {\n                        $e.preventDefault();\n                        $e.stopImmediatePropagation();\n                        _.defer(function() {\n                            $input.focus();\n                        });\n                    }\n                });\n                $menu.on(\"mousedown.tt\", function($e) {\n                    $e.preventDefault();\n                });\n            },\n            _onSelectableClicked: function onSelectableClicked(type, $el) {\n                this.select($el);\n            },\n            _onDatasetCleared: function onDatasetCleared() {\n                this._updateHint();\n            },\n            _onDatasetRendered: function onDatasetRendered(type, dataset, suggestions, async) {\n                this._updateHint();\n                this.eventBus.trigger(\"render\", suggestions, async, dataset);\n            },\n            _onAsyncRequested: function onAsyncRequested(type, dataset, query) {\n                this.eventBus.trigger(\"asyncrequest\", query, dataset);\n            },\n            _onAsyncCanceled: function onAsyncCanceled(type, dataset, query) {\n                this.eventBus.trigger(\"asynccancel\", query, dataset);\n            },\n            _onAsyncReceived: function onAsyncReceived(type, dataset, query) {\n                this.eventBus.trigger(\"asyncreceive\", query, dataset);\n            },\n            _onFocused: function onFocused() {\n                this._minLengthMet() && this.menu.update(this.input.getQuery());\n            },\n            _onBlurred: function onBlurred() {\n                if (this.input.hasQueryChangedSinceLastFocus()) {\n                    this.eventBus.trigger(\"change\", this.input.getQuery());\n                }\n            },\n            _onEnterKeyed: function onEnterKeyed(type, $e) {\n                var $selectable;\n                if ($selectable = this.menu.getActiveSelectable()) {\n                    this.select($selectable) && $e.preventDefault();\n                }\n            },\n            _onTabKeyed: function onTabKeyed(type, $e) {\n                var $selectable;\n                if ($selectable = this.menu.getActiveSelectable()) {\n                    this.select($selectable) && $e.preventDefault();\n                } else if ($selectable = this.menu.getTopSelectable()) {\n                    this.autocomplete($selectable) && $e.preventDefault();\n                }\n            },\n            _onEscKeyed: function onEscKeyed() {\n                this.close();\n            },\n            _onUpKeyed: function onUpKeyed() {\n                this.moveCursor(-1);\n            },\n            _onDownKeyed: function onDownKeyed() {\n                this.moveCursor(+1);\n            },\n            _onLeftKeyed: function onLeftKeyed() {\n                if (this.dir === \"rtl\" && this.input.isCursorAtEnd()) {\n                    this.autocomplete(this.menu.getTopSelectable());\n                }\n            },\n            _onRightKeyed: function onRightKeyed() {\n                if (this.dir === \"ltr\" && this.input.isCursorAtEnd()) {\n                    this.autocomplete(this.menu.getTopSelectable());\n                }\n            },\n            _onQueryChanged: function onQueryChanged(e, query) {\n                this._minLengthMet(query) ? this.menu.update(query) : this.menu.empty();\n            },\n            _onWhitespaceChanged: function onWhitespaceChanged() {\n                this._updateHint();\n            },\n            _onLangDirChanged: function onLangDirChanged(e, dir) {\n                if (this.dir !== dir) {\n                    this.dir = dir;\n                    this.menu.setLanguageDirection(dir);\n                }\n            },\n            _openIfActive: function openIfActive() {\n                this.isActive() && this.open();\n            },\n            _minLengthMet: function minLengthMet(query) {\n                query = _.isString(query) ? query : this.input.getQuery() || \"\";\n                return query.length >= this.minLength;\n            },\n            _updateHint: function updateHint() {\n                var $selectable, data, val, query, escapedQuery, frontMatchRegEx, match;\n                $selectable = this.menu.getTopSelectable();\n                data = this.menu.getSelectableData($selectable);\n                val = this.input.getInputValue();\n                if (data && !_.isBlankString(val) && !this.input.hasOverflow()) {\n                    query = Input.normalizeQuery(val);\n                    escapedQuery = _.escapeRegExChars(query);\n                    frontMatchRegEx = new RegExp(\"^(?:\" + escapedQuery + \")(.+$)\", \"i\");\n                    match = frontMatchRegEx.exec(data.val);\n                    match && this.input.setHint(val + match[1]);\n                } else {\n                    this.input.clearHint();\n                }\n            },\n            isEnabled: function isEnabled() {\n                return this.enabled;\n            },\n            enable: function enable() {\n                this.enabled = true;\n            },\n            disable: function disable() {\n                this.enabled = false;\n            },\n            isActive: function isActive() {\n                return this.active;\n            },\n            activate: function activate() {\n                if (this.isActive()) {\n                    return true;\n                } else if (!this.isEnabled() || this.eventBus.before(\"active\")) {\n                    return false;\n                } else {\n                    this.active = true;\n                    this.eventBus.trigger(\"active\");\n                    return true;\n                }\n            },\n            deactivate: function deactivate() {\n                if (!this.isActive()) {\n                    return true;\n                } else if (this.eventBus.before(\"idle\")) {\n                    return false;\n                } else {\n                    this.active = false;\n                    this.close();\n                    this.eventBus.trigger(\"idle\");\n                    return true;\n                }\n            },\n            isOpen: function isOpen() {\n                return this.menu.isOpen();\n            },\n            open: function open() {\n                if (!this.isOpen() && !this.eventBus.before(\"open\")) {\n                    this.menu.open();\n                    this._updateHint();\n                    this.eventBus.trigger(\"open\");\n                }\n                return this.isOpen();\n            },\n            close: function close() {\n                if (this.isOpen() && !this.eventBus.before(\"close\")) {\n                    this.menu.close();\n                    this.input.clearHint();\n                    this.input.resetInputValue();\n                    this.eventBus.trigger(\"close\");\n                }\n                return !this.isOpen();\n            },\n            setVal: function setVal(val) {\n                this.input.setQuery(_.toStr(val));\n            },\n            getVal: function getVal() {\n                return this.input.getQuery();\n            },\n            select: function select($selectable) {\n                var data = this.menu.getSelectableData($selectable);\n                if (data && !this.eventBus.before(\"select\", data.obj)) {\n                    this.input.setQuery(data.val, true);\n                    this.eventBus.trigger(\"select\", data.obj);\n                    this.close();\n                    return true;\n                }\n                return false;\n            },\n            autocomplete: function autocomplete($selectable) {\n                var query, data, isValid;\n                query = this.input.getQuery();\n                data = this.menu.getSelectableData($selectable);\n                isValid = data && query !== data.val;\n                if (isValid && !this.eventBus.before(\"autocomplete\", data.obj)) {\n                    this.input.setQuery(data.val);\n                    this.eventBus.trigger(\"autocomplete\", data.obj);\n                    return true;\n                }\n                return false;\n            },\n            moveCursor: function moveCursor(delta) {\n                var query, $candidate, data, payload, cancelMove;\n                query = this.input.getQuery();\n                $candidate = this.menu.selectableRelativeToCursor(delta);\n                data = this.menu.getSelectableData($candidate);\n                payload = data ? data.obj : null;\n                cancelMove = this._minLengthMet() && this.menu.update(query);\n                if (!cancelMove && !this.eventBus.before(\"cursorchange\", payload)) {\n                    this.menu.setCursor($candidate);\n                    if (data) {\n                        this.input.setInputValue(data.val);\n                    } else {\n                        this.input.resetInputValue();\n                        this._updateHint();\n                    }\n                    this.eventBus.trigger(\"cursorchange\", payload);\n                    return true;\n                }\n                return false;\n            },\n            destroy: function destroy() {\n                this.input.destroy();\n                this.menu.destroy();\n            }\n        });\n        return Typeahead;\n        function c(ctx) {\n            var methods = [].slice.call(arguments, 1);\n            return function() {\n                var args = [].slice.call(arguments);\n                _.each(methods, function(method) {\n                    return ctx[method].apply(ctx, args);\n                });\n            };\n        }\n    }();\n    (function() {\n        \"use strict\";\n        var old, keys, methods;\n        old = $.fn.typeahead;\n        keys = {\n            www: \"tt-www\",\n            attrs: \"tt-attrs\",\n            typeahead: \"tt-typeahead\"\n        };\n        methods = {\n            initialize: function initialize(o, datasets) {\n                var www;\n                datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);\n                o = o || {};\n                www = WWW(o.classNames);\n                return this.each(attach);\n                function attach() {\n                    var $input, $wrapper, $hint, $menu, defaultHint, defaultMenu, eventBus, input, menu, typeahead, MenuConstructor;\n                    _.each(datasets, function(d) {\n                        d.highlight = !!o.highlight;\n                    });\n                    $input = $(this);\n                    $wrapper = $(www.html.wrapper);\n                    $hint = $elOrNull(o.hint);\n                    $menu = $elOrNull(o.menu);\n                    defaultHint = o.hint !== false && !$hint;\n                    defaultMenu = o.menu !== false && !$menu;\n                    defaultHint && ($hint = buildHintFromInput($input, www));\n                    defaultMenu && ($menu = $(www.html.menu).css(www.css.menu));\n                    $hint && $hint.val(\"\");\n                    $input = prepInput($input, www);\n                    if (defaultHint || defaultMenu) {\n                        $wrapper.css(www.css.wrapper);\n                        $input.css(defaultHint ? www.css.input : www.css.inputWithNoHint);\n                        $input.wrap($wrapper).parent().prepend(defaultHint ? $hint : null).append(defaultMenu ? $menu : null);\n                    }\n                    MenuConstructor = defaultMenu ? DefaultMenu : Menu;\n                    eventBus = new EventBus({\n                        el: $input\n                    });\n                    input = new Input({\n                        hint: $hint,\n                        input: $input\n                    }, www);\n                    menu = new MenuConstructor({\n                        node: $menu,\n                        datasets: datasets\n                    }, www);\n                    typeahead = new Typeahead({\n                        input: input,\n                        menu: menu,\n                        eventBus: eventBus,\n                        minLength: o.minLength\n                    }, www);\n                    $input.data(keys.www, www);\n                    $input.data(keys.typeahead, typeahead);\n                }\n            },\n            isEnabled: function isEnabled() {\n                var enabled;\n                ttEach(this.first(), function(t) {\n                    enabled = t.isEnabled();\n                });\n                return enabled;\n            },\n            enable: function enable() {\n                ttEach(this, function(t) {\n                    t.enable();\n                });\n                return this;\n            },\n            disable: function disable() {\n                ttEach(this, function(t) {\n                    t.disable();\n                });\n                return this;\n            },\n            isActive: function isActive() {\n                var active;\n                ttEach(this.first(), function(t) {\n                    active = t.isActive();\n                });\n                return active;\n            },\n            activate: function activate() {\n                ttEach(this, function(t) {\n                    t.activate();\n                });\n                return this;\n            },\n            deactivate: function deactivate() {\n                ttEach(this, function(t) {\n                    t.deactivate();\n                });\n                return this;\n            },\n            isOpen: function isOpen() {\n                var open;\n                ttEach(this.first(), function(t) {\n                    open = t.isOpen();\n                });\n                return open;\n            },\n            open: function open() {\n                ttEach(this, function(t) {\n                    t.open();\n                });\n                return this;\n            },\n            close: function close() {\n                ttEach(this, function(t) {\n                    t.close();\n                });\n                return this;\n            },\n            select: function select(el) {\n                var success = false, $el = $(el);\n                ttEach(this.first(), function(t) {\n                    success = t.select($el);\n                });\n                return success;\n            },\n            autocomplete: function autocomplete(el) {\n                var success = false, $el = $(el);\n                ttEach(this.first(), function(t) {\n                    success = t.autocomplete($el);\n                });\n                return success;\n            },\n            moveCursor: function moveCursoe(delta) {\n                var success = false;\n                ttEach(this.first(), function(t) {\n                    success = t.moveCursor(delta);\n                });\n                return success;\n            },\n            val: function val(newVal) {\n                var query;\n                if (!arguments.length) {\n                    ttEach(this.first(), function(t) {\n                        query = t.getVal();\n                    });\n                    return query;\n                } else {\n                    ttEach(this, function(t) {\n                        t.setVal(newVal);\n                    });\n                    return this;\n                }\n            },\n            destroy: function destroy() {\n                ttEach(this, function(typeahead, $input) {\n                    revert($input);\n                    typeahead.destroy();\n                });\n                return this;\n            }\n        };\n        $.fn.typeahead = function(method) {\n            if (methods[method]) {\n                return methods[method].apply(this, [].slice.call(arguments, 1));\n            } else {\n                return methods.initialize.apply(this, arguments);\n            }\n        };\n        $.fn.typeahead.noConflict = function noConflict() {\n            $.fn.typeahead = old;\n            return this;\n        };\n        function ttEach($els, fn) {\n            $els.each(function() {\n                var $input = $(this), typeahead;\n                (typeahead = $input.data(keys.typeahead)) && fn(typeahead, $input);\n            });\n        }\n        function buildHintFromInput($input, www) {\n            return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop(\"readonly\", true).removeAttr(\"id name placeholder required\").attr({\n                autocomplete: \"off\",\n                spellcheck: \"false\",\n                tabindex: -1\n            });\n        }\n        function prepInput($input, www) {\n            $input.data(keys.attrs, {\n                dir: $input.attr(\"dir\"),\n                autocomplete: $input.attr(\"autocomplete\"),\n                spellcheck: $input.attr(\"spellcheck\"),\n                style: $input.attr(\"style\")\n            });\n            $input.addClass(www.classes.input).attr({\n                autocomplete: \"off\",\n                spellcheck: false\n            });\n            try {\n                !$input.attr(\"dir\") && $input.attr(\"dir\", \"auto\");\n            } catch (e) {}\n            return $input;\n        }\n        function getBackgroundStyles($el) {\n            return {\n                backgroundAttachment: $el.css(\"background-attachment\"),\n                backgroundClip: $el.css(\"background-clip\"),\n                backgroundColor: $el.css(\"background-color\"),\n                backgroundImage: $el.css(\"background-image\"),\n                backgroundOrigin: $el.css(\"background-origin\"),\n                backgroundPosition: $el.css(\"background-position\"),\n                backgroundRepeat: $el.css(\"background-repeat\"),\n                backgroundSize: $el.css(\"background-size\")\n            };\n        }\n        function revert($input) {\n            var www, $wrapper;\n            www = $input.data(keys.www);\n            $wrapper = $input.parent().filter(www.selectors.wrapper);\n            _.each($input.data(keys.attrs), function(val, key) {\n                _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);\n            });\n            $input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input);\n            if ($wrapper.length) {\n                $input.detach().insertAfter($wrapper);\n                $wrapper.remove();\n            }\n        }\n        function $elOrNull(obj) {\n            var isValid, $el;\n            isValid = _.isJQuery(obj) || _.isElement(obj);\n            $el = isValid ? $(obj).first() : [];\n            return $el.length ? $el : null;\n        }\n    })();\n});"]}