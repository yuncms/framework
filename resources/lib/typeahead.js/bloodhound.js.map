{"version":3,"sources":["bloodhound.js"],"names":["root","factory","define","amd","a0","exports","module","require","jQuery","this","$","_","isMsie","test","navigator","userAgent","match","isBlankString","str","escapeRegExChars","replace","isString","obj","isNumber","isArray","isFunction","isObject","isPlainObject","isUndefined","isElement","nodeType","isJQuery","toStr","s","bind","proxy","each","collection","cb","index","value","map","filter","grep","every","result","key","val","call","some","mixin","extend","identity","x","clone","getIdGenerator","counter","templatify","String","defer","fn","setTimeout","debounce","func","wait","immediate","timeout","later","callNow","context","args","arguments","apply","clearTimeout","throttle","previous","Date","now","remaining","stringify","JSON","noop","VERSION","tokenizers","nonword","whitespace","getObjTokenizer","split","tokenizer","keys","slice","o","tokens","k","concat","LruCache","maxSize","reset","set","get","List","head","tail","prototype","node","tailItem","list","size","remove","hash","moveToFront","prev","next","add","PersistentStorage","LOCAL_STORAGE","window","localStorage","setItem","removeItem","err","namespace","override","prefix","join","ttlKey","keyMatcher","RegExp","ls","_noop","_prefix","_ttlKey","clear","isExpired","_safeSet","name","decode","getItem","ttl","encode","i","len","length","push","gatherMatchingKeys","getTime","parseJSON","Transport","pendingRequestsCount","pendingRequests","maxPendingRequests","sharedCache","cancelled","lastReq","_send","transport","_get","limiter","_cache","cache","setMaxPendingRequests","num","resetCache","_fingerprint","url","type","param","data","fingerprint","jqXhr","that","done","resp","fail","always","onDeckRequestArgs","cancel","SearchIndex","CHILDREN","IDS","datumTokenizer","queryTokenizer","error","identify","bootstrap","datums","trie","datum","id","normalizeTokens","token","chars","ch","shift","newNode","ids","search","query","matches","arrayA","arrayB","ai","bi","intersection","sort","lenArrayA","lenArrayB","getIntersection","array","seen","uniques","unique","all","values","serialize","toLowerCase","Prefetch","prepare","transform","thumbprint","storage","cacheKey","protocol","_settings","dataType","store","location","fromCache","stored","fromNetwork","settings","Remote","cancelLastRequest","oParser","defaults","sorter","initialize","sufficient","local","prefetch","remote","callbackToDeferred","ajax","parsePrefetch","wildcard","rateLimitBy","rateLimitWait","encodeURIComponent","method","parseRemote","deferred","Deferred","resolve","reject","old","Bloodhound","noConflict","__ttAdapter","sync","async","_loadPrefetch","serialized","promise","_initialize","initPromise","force","nonDuplicates","r","l","clearPrefetchCache","clearRemoteCache","ttAdapter"],"mappings":"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","file":"bloodhound.js","sourcesContent":["/*!\n * typeahead.js 0.11.1\n * https://github.com/twitter/typeahead.js\n * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT\n */\n\n(function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(\"bloodhound\", [ \"jquery\" ], function(a0) {\n            return root[\"Bloodhound\"] = factory(a0);\n        });\n    } else if (typeof exports === \"object\") {\n        module.exports = factory(require(\"jquery\"));\n    } else {\n        root[\"Bloodhound\"] = factory(jQuery);\n    }\n})(this, function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            isElement: function(obj) {\n                return !!(obj && obj.nodeType === 1);\n            },\n            isJQuery: function(obj) {\n                return obj instanceof $;\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            identity: function(x) {\n                return x;\n            },\n            clone: function(obj) {\n                return $.extend(true, {}, obj);\n            },\n            getIdGenerator: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            },\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            stringify: function(val) {\n                return _.isString(val) ? val : JSON.stringify(val);\n            },\n            noop: function() {}\n        };\n    }();\n    var VERSION = \"0.11.1\";\n    var tokenizers = function() {\n        \"use strict\";\n        return {\n            nonword: nonword,\n            whitespace: whitespace,\n            obj: {\n                nonword: getObjTokenizer(nonword),\n                whitespace: getObjTokenizer(whitespace)\n            }\n        };\n        function whitespace(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\s+/) : [];\n        }\n        function nonword(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\W+/) : [];\n        }\n        function getObjTokenizer(tokenizer) {\n            return function setKey(keys) {\n                keys = _.isArray(keys) ? keys : [].slice.call(arguments, 0);\n                return function tokenize(o) {\n                    var tokens = [];\n                    _.each(keys, function(k) {\n                        tokens = tokens.concat(tokenizer(_.toStr(o[k])));\n                    });\n                    return tokens;\n                };\n            };\n        }\n    }();\n    var LruCache = function() {\n        \"use strict\";\n        function LruCache(maxSize) {\n            this.maxSize = _.isNumber(maxSize) ? maxSize : 100;\n            this.reset();\n            if (this.maxSize <= 0) {\n                this.set = this.get = $.noop;\n            }\n        }\n        _.mixin(LruCache.prototype, {\n            set: function set(key, val) {\n                var tailItem = this.list.tail, node;\n                if (this.size >= this.maxSize) {\n                    this.list.remove(tailItem);\n                    delete this.hash[tailItem.key];\n                    this.size--;\n                }\n                if (node = this.hash[key]) {\n                    node.val = val;\n                    this.list.moveToFront(node);\n                } else {\n                    node = new Node(key, val);\n                    this.list.add(node);\n                    this.hash[key] = node;\n                    this.size++;\n                }\n            },\n            get: function get(key) {\n                var node = this.hash[key];\n                if (node) {\n                    this.list.moveToFront(node);\n                    return node.val;\n                }\n            },\n            reset: function reset() {\n                this.size = 0;\n                this.hash = {};\n                this.list = new List();\n            }\n        });\n        function List() {\n            this.head = this.tail = null;\n        }\n        _.mixin(List.prototype, {\n            add: function add(node) {\n                if (this.head) {\n                    node.next = this.head;\n                    this.head.prev = node;\n                }\n                this.head = node;\n                this.tail = this.tail || node;\n            },\n            remove: function remove(node) {\n                node.prev ? node.prev.next = node.next : this.head = node.next;\n                node.next ? node.next.prev = node.prev : this.tail = node.prev;\n            },\n            moveToFront: function(node) {\n                this.remove(node);\n                this.add(node);\n            }\n        });\n        function Node(key, val) {\n            this.key = key;\n            this.val = val;\n            this.prev = this.next = null;\n        }\n        return LruCache;\n    }();\n    var PersistentStorage = function() {\n        \"use strict\";\n        var LOCAL_STORAGE;\n        try {\n            LOCAL_STORAGE = window.localStorage;\n            LOCAL_STORAGE.setItem(\"~~~\", \"!\");\n            LOCAL_STORAGE.removeItem(\"~~~\");\n        } catch (err) {\n            LOCAL_STORAGE = null;\n        }\n        function PersistentStorage(namespace, override) {\n            this.prefix = [ \"__\", namespace, \"__\" ].join(\"\");\n            this.ttlKey = \"__ttl__\";\n            this.keyMatcher = new RegExp(\"^\" + _.escapeRegExChars(this.prefix));\n            this.ls = override || LOCAL_STORAGE;\n            !this.ls && this._noop();\n        }\n        _.mixin(PersistentStorage.prototype, {\n            _prefix: function(key) {\n                return this.prefix + key;\n            },\n            _ttlKey: function(key) {\n                return this._prefix(key) + this.ttlKey;\n            },\n            _noop: function() {\n                this.get = this.set = this.remove = this.clear = this.isExpired = _.noop;\n            },\n            _safeSet: function(key, val) {\n                try {\n                    this.ls.setItem(key, val);\n                } catch (err) {\n                    if (err.name === \"QuotaExceededError\") {\n                        this.clear();\n                        this._noop();\n                    }\n                }\n            },\n            get: function(key) {\n                if (this.isExpired(key)) {\n                    this.remove(key);\n                }\n                return decode(this.ls.getItem(this._prefix(key)));\n            },\n            set: function(key, val, ttl) {\n                if (_.isNumber(ttl)) {\n                    this._safeSet(this._ttlKey(key), encode(now() + ttl));\n                } else {\n                    this.ls.removeItem(this._ttlKey(key));\n                }\n                return this._safeSet(this._prefix(key), encode(val));\n            },\n            remove: function(key) {\n                this.ls.removeItem(this._ttlKey(key));\n                this.ls.removeItem(this._prefix(key));\n                return this;\n            },\n            clear: function() {\n                var i, keys = gatherMatchingKeys(this.keyMatcher);\n                for (i = keys.length; i--; ) {\n                    this.remove(keys[i]);\n                }\n                return this;\n            },\n            isExpired: function(key) {\n                var ttl = decode(this.ls.getItem(this._ttlKey(key)));\n                return _.isNumber(ttl) && now() > ttl ? true : false;\n            }\n        });\n        return PersistentStorage;\n        function now() {\n            return new Date().getTime();\n        }\n        function encode(val) {\n            return JSON.stringify(_.isUndefined(val) ? null : val);\n        }\n        function decode(val) {\n            return $.parseJSON(val);\n        }\n        function gatherMatchingKeys(keyMatcher) {\n            var i, key, keys = [], len = LOCAL_STORAGE.length;\n            for (i = 0; i < len; i++) {\n                if ((key = LOCAL_STORAGE.key(i)).match(keyMatcher)) {\n                    keys.push(key.replace(keyMatcher, \"\"));\n                }\n            }\n            return keys;\n        }\n    }();\n    var Transport = function() {\n        \"use strict\";\n        var pendingRequestsCount = 0, pendingRequests = {}, maxPendingRequests = 6, sharedCache = new LruCache(10);\n        function Transport(o) {\n            o = o || {};\n            this.cancelled = false;\n            this.lastReq = null;\n            this._send = o.transport;\n            this._get = o.limiter ? o.limiter(this._get) : this._get;\n            this._cache = o.cache === false ? new LruCache(0) : sharedCache;\n        }\n        Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {\n            maxPendingRequests = num;\n        };\n        Transport.resetCache = function resetCache() {\n            sharedCache.reset();\n        };\n        _.mixin(Transport.prototype, {\n            _fingerprint: function fingerprint(o) {\n                o = o || {};\n                return o.url + o.type + $.param(o.data || {});\n            },\n            _get: function(o, cb) {\n                var that = this, fingerprint, jqXhr;\n                fingerprint = this._fingerprint(o);\n                if (this.cancelled || fingerprint !== this.lastReq) {\n                    return;\n                }\n                if (jqXhr = pendingRequests[fingerprint]) {\n                    jqXhr.done(done).fail(fail);\n                } else if (pendingRequestsCount < maxPendingRequests) {\n                    pendingRequestsCount++;\n                    pendingRequests[fingerprint] = this._send(o).done(done).fail(fail).always(always);\n                } else {\n                    this.onDeckRequestArgs = [].slice.call(arguments, 0);\n                }\n                function done(resp) {\n                    cb(null, resp);\n                    that._cache.set(fingerprint, resp);\n                }\n                function fail() {\n                    cb(true);\n                }\n                function always() {\n                    pendingRequestsCount--;\n                    delete pendingRequests[fingerprint];\n                    if (that.onDeckRequestArgs) {\n                        that._get.apply(that, that.onDeckRequestArgs);\n                        that.onDeckRequestArgs = null;\n                    }\n                }\n            },\n            get: function(o, cb) {\n                var resp, fingerprint;\n                cb = cb || $.noop;\n                o = _.isString(o) ? {\n                    url: o\n                } : o || {};\n                fingerprint = this._fingerprint(o);\n                this.cancelled = false;\n                this.lastReq = fingerprint;\n                if (resp = this._cache.get(fingerprint)) {\n                    cb(null, resp);\n                } else {\n                    this._get(o, cb);\n                }\n            },\n            cancel: function() {\n                this.cancelled = true;\n            }\n        });\n        return Transport;\n    }();\n    var SearchIndex = window.SearchIndex = function() {\n        \"use strict\";\n        var CHILDREN = \"c\", IDS = \"i\";\n        function SearchIndex(o) {\n            o = o || {};\n            if (!o.datumTokenizer || !o.queryTokenizer) {\n                $.error(\"datumTokenizer and queryTokenizer are both required\");\n            }\n            this.identify = o.identify || _.stringify;\n            this.datumTokenizer = o.datumTokenizer;\n            this.queryTokenizer = o.queryTokenizer;\n            this.reset();\n        }\n        _.mixin(SearchIndex.prototype, {\n            bootstrap: function bootstrap(o) {\n                this.datums = o.datums;\n                this.trie = o.trie;\n            },\n            add: function(data) {\n                var that = this;\n                data = _.isArray(data) ? data : [ data ];\n                _.each(data, function(datum) {\n                    var id, tokens;\n                    that.datums[id = that.identify(datum)] = datum;\n                    tokens = normalizeTokens(that.datumTokenizer(datum));\n                    _.each(tokens, function(token) {\n                        var node, chars, ch;\n                        node = that.trie;\n                        chars = token.split(\"\");\n                        while (ch = chars.shift()) {\n                            node = node[CHILDREN][ch] || (node[CHILDREN][ch] = newNode());\n                            node[IDS].push(id);\n                        }\n                    });\n                });\n            },\n            get: function get(ids) {\n                var that = this;\n                return _.map(ids, function(id) {\n                    return that.datums[id];\n                });\n            },\n            search: function search(query) {\n                var that = this, tokens, matches;\n                tokens = normalizeTokens(this.queryTokenizer(query));\n                _.each(tokens, function(token) {\n                    var node, chars, ch, ids;\n                    if (matches && matches.length === 0) {\n                        return false;\n                    }\n                    node = that.trie;\n                    chars = token.split(\"\");\n                    while (node && (ch = chars.shift())) {\n                        node = node[CHILDREN][ch];\n                    }\n                    if (node && chars.length === 0) {\n                        ids = node[IDS].slice(0);\n                        matches = matches ? getIntersection(matches, ids) : ids;\n                    } else {\n                        matches = [];\n                        return false;\n                    }\n                });\n                return matches ? _.map(unique(matches), function(id) {\n                    return that.datums[id];\n                }) : [];\n            },\n            all: function all() {\n                var values = [];\n                for (var key in this.datums) {\n                    values.push(this.datums[key]);\n                }\n                return values;\n            },\n            reset: function reset() {\n                this.datums = {};\n                this.trie = newNode();\n            },\n            serialize: function serialize() {\n                return {\n                    datums: this.datums,\n                    trie: this.trie\n                };\n            }\n        });\n        return SearchIndex;\n        function normalizeTokens(tokens) {\n            tokens = _.filter(tokens, function(token) {\n                return !!token;\n            });\n            tokens = _.map(tokens, function(token) {\n                return token.toLowerCase();\n            });\n            return tokens;\n        }\n        function newNode() {\n            var node = {};\n            node[IDS] = [];\n            node[CHILDREN] = {};\n            return node;\n        }\n        function unique(array) {\n            var seen = {}, uniques = [];\n            for (var i = 0, len = array.length; i < len; i++) {\n                if (!seen[array[i]]) {\n                    seen[array[i]] = true;\n                    uniques.push(array[i]);\n                }\n            }\n            return uniques;\n        }\n        function getIntersection(arrayA, arrayB) {\n            var ai = 0, bi = 0, intersection = [];\n            arrayA = arrayA.sort();\n            arrayB = arrayB.sort();\n            var lenArrayA = arrayA.length, lenArrayB = arrayB.length;\n            while (ai < lenArrayA && bi < lenArrayB) {\n                if (arrayA[ai] < arrayB[bi]) {\n                    ai++;\n                } else if (arrayA[ai] > arrayB[bi]) {\n                    bi++;\n                } else {\n                    intersection.push(arrayA[ai]);\n                    ai++;\n                    bi++;\n                }\n            }\n            return intersection;\n        }\n    }();\n    var Prefetch = function() {\n        \"use strict\";\n        var keys;\n        keys = {\n            data: \"data\",\n            protocol: \"protocol\",\n            thumbprint: \"thumbprint\"\n        };\n        function Prefetch(o) {\n            this.url = o.url;\n            this.ttl = o.ttl;\n            this.cache = o.cache;\n            this.prepare = o.prepare;\n            this.transform = o.transform;\n            this.transport = o.transport;\n            this.thumbprint = o.thumbprint;\n            this.storage = new PersistentStorage(o.cacheKey);\n        }\n        _.mixin(Prefetch.prototype, {\n            _settings: function settings() {\n                return {\n                    url: this.url,\n                    type: \"GET\",\n                    dataType: \"json\"\n                };\n            },\n            store: function store(data) {\n                if (!this.cache) {\n                    return;\n                }\n                this.storage.set(keys.data, data, this.ttl);\n                this.storage.set(keys.protocol, location.protocol, this.ttl);\n                this.storage.set(keys.thumbprint, this.thumbprint, this.ttl);\n            },\n            fromCache: function fromCache() {\n                var stored = {}, isExpired;\n                if (!this.cache) {\n                    return null;\n                }\n                stored.data = this.storage.get(keys.data);\n                stored.protocol = this.storage.get(keys.protocol);\n                stored.thumbprint = this.storage.get(keys.thumbprint);\n                isExpired = stored.thumbprint !== this.thumbprint || stored.protocol !== location.protocol;\n                return stored.data && !isExpired ? stored.data : null;\n            },\n            fromNetwork: function(cb) {\n                var that = this, settings;\n                if (!cb) {\n                    return;\n                }\n                settings = this.prepare(this._settings());\n                this.transport(settings).fail(onError).done(onResponse);\n                function onError() {\n                    cb(true);\n                }\n                function onResponse(resp) {\n                    cb(null, that.transform(resp));\n                }\n            },\n            clear: function clear() {\n                this.storage.clear();\n                return this;\n            }\n        });\n        return Prefetch;\n    }();\n    var Remote = function() {\n        \"use strict\";\n        function Remote(o) {\n            this.url = o.url;\n            this.prepare = o.prepare;\n            this.transform = o.transform;\n            this.transport = new Transport({\n                cache: o.cache,\n                limiter: o.limiter,\n                transport: o.transport\n            });\n        }\n        _.mixin(Remote.prototype, {\n            _settings: function settings() {\n                return {\n                    url: this.url,\n                    type: \"GET\",\n                    dataType: \"json\"\n                };\n            },\n            get: function get(query, cb) {\n                var that = this, settings;\n                if (!cb) {\n                    return;\n                }\n                query = query || \"\";\n                settings = this.prepare(query, this._settings());\n                return this.transport.get(settings, onResponse);\n                function onResponse(err, resp) {\n                    err ? cb([]) : cb(that.transform(resp));\n                }\n            },\n            cancelLastRequest: function cancelLastRequest() {\n                this.transport.cancel();\n            }\n        });\n        return Remote;\n    }();\n    var oParser = function() {\n        \"use strict\";\n        return function parse(o) {\n            var defaults, sorter;\n            defaults = {\n                initialize: true,\n                identify: _.stringify,\n                datumTokenizer: null,\n                queryTokenizer: null,\n                sufficient: 5,\n                sorter: null,\n                local: [],\n                prefetch: null,\n                remote: null\n            };\n            o = _.mixin(defaults, o || {});\n            !o.datumTokenizer && $.error(\"datumTokenizer is required\");\n            !o.queryTokenizer && $.error(\"queryTokenizer is required\");\n            sorter = o.sorter;\n            o.sorter = sorter ? function(x) {\n                return x.sort(sorter);\n            } : _.identity;\n            o.local = _.isFunction(o.local) ? o.local() : o.local;\n            o.prefetch = parsePrefetch(o.prefetch);\n            o.remote = parseRemote(o.remote);\n            return o;\n        };\n        function parsePrefetch(o) {\n            var defaults;\n            if (!o) {\n                return null;\n            }\n            defaults = {\n                url: null,\n                ttl: 24 * 60 * 60 * 1e3,\n                cache: true,\n                cacheKey: null,\n                thumbprint: \"\",\n                prepare: _.identity,\n                transform: _.identity,\n                transport: null\n            };\n            o = _.isString(o) ? {\n                url: o\n            } : o;\n            o = _.mixin(defaults, o);\n            !o.url && $.error(\"prefetch requires url to be set\");\n            o.transform = o.filter || o.transform;\n            o.cacheKey = o.cacheKey || o.url;\n            o.thumbprint = VERSION + o.thumbprint;\n            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n            return o;\n        }\n        function parseRemote(o) {\n            var defaults;\n            if (!o) {\n                return;\n            }\n            defaults = {\n                url: null,\n                cache: true,\n                prepare: null,\n                replace: null,\n                wildcard: null,\n                limiter: null,\n                rateLimitBy: \"debounce\",\n                rateLimitWait: 300,\n                transform: _.identity,\n                transport: null\n            };\n            o = _.isString(o) ? {\n                url: o\n            } : o;\n            o = _.mixin(defaults, o);\n            !o.url && $.error(\"remote requires url to be set\");\n            o.transform = o.filter || o.transform;\n            o.prepare = toRemotePrepare(o);\n            o.limiter = toLimiter(o);\n            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n            delete o.replace;\n            delete o.wildcard;\n            delete o.rateLimitBy;\n            delete o.rateLimitWait;\n            return o;\n        }\n        function toRemotePrepare(o) {\n            var prepare, replace, wildcard;\n            prepare = o.prepare;\n            replace = o.replace;\n            wildcard = o.wildcard;\n            if (prepare) {\n                return prepare;\n            }\n            if (replace) {\n                prepare = prepareByReplace;\n            } else if (o.wildcard) {\n                prepare = prepareByWildcard;\n            } else {\n                prepare = idenityPrepare;\n            }\n            return prepare;\n            function prepareByReplace(query, settings) {\n                settings.url = replace(settings.url, query);\n                return settings;\n            }\n            function prepareByWildcard(query, settings) {\n                settings.url = settings.url.replace(wildcard, encodeURIComponent(query));\n                return settings;\n            }\n            function idenityPrepare(query, settings) {\n                return settings;\n            }\n        }\n        function toLimiter(o) {\n            var limiter, method, wait;\n            limiter = o.limiter;\n            method = o.rateLimitBy;\n            wait = o.rateLimitWait;\n            if (!limiter) {\n                limiter = /^throttle$/i.test(method) ? throttle(wait) : debounce(wait);\n            }\n            return limiter;\n            function debounce(wait) {\n                return function debounce(fn) {\n                    return _.debounce(fn, wait);\n                };\n            }\n            function throttle(wait) {\n                return function throttle(fn) {\n                    return _.throttle(fn, wait);\n                };\n            }\n        }\n        function callbackToDeferred(fn) {\n            return function wrapper(o) {\n                var deferred = $.Deferred();\n                fn(o, onSuccess, onError);\n                return deferred;\n                function onSuccess(resp) {\n                    _.defer(function() {\n                        deferred.resolve(resp);\n                    });\n                }\n                function onError(err) {\n                    _.defer(function() {\n                        deferred.reject(err);\n                    });\n                }\n            };\n        }\n    }();\n    var Bloodhound = function() {\n        \"use strict\";\n        var old;\n        old = window && window.Bloodhound;\n        function Bloodhound(o) {\n            o = oParser(o);\n            this.sorter = o.sorter;\n            this.identify = o.identify;\n            this.sufficient = o.sufficient;\n            this.local = o.local;\n            this.remote = o.remote ? new Remote(o.remote) : null;\n            this.prefetch = o.prefetch ? new Prefetch(o.prefetch) : null;\n            this.index = new SearchIndex({\n                identify: this.identify,\n                datumTokenizer: o.datumTokenizer,\n                queryTokenizer: o.queryTokenizer\n            });\n            o.initialize !== false && this.initialize();\n        }\n        Bloodhound.noConflict = function noConflict() {\n            window && (window.Bloodhound = old);\n            return Bloodhound;\n        };\n        Bloodhound.tokenizers = tokenizers;\n        _.mixin(Bloodhound.prototype, {\n            __ttAdapter: function ttAdapter() {\n                var that = this;\n                return this.remote ? withAsync : withoutAsync;\n                function withAsync(query, sync, async) {\n                    return that.search(query, sync, async);\n                }\n                function withoutAsync(query, sync) {\n                    return that.search(query, sync);\n                }\n            },\n            _loadPrefetch: function loadPrefetch() {\n                var that = this, deferred, serialized;\n                deferred = $.Deferred();\n                if (!this.prefetch) {\n                    deferred.resolve();\n                } else if (serialized = this.prefetch.fromCache()) {\n                    this.index.bootstrap(serialized);\n                    deferred.resolve();\n                } else {\n                    this.prefetch.fromNetwork(done);\n                }\n                return deferred.promise();\n                function done(err, data) {\n                    if (err) {\n                        return deferred.reject();\n                    }\n                    that.add(data);\n                    that.prefetch.store(that.index.serialize());\n                    deferred.resolve();\n                }\n            },\n            _initialize: function initialize() {\n                var that = this, deferred;\n                this.clear();\n                (this.initPromise = this._loadPrefetch()).done(addLocalToIndex);\n                return this.initPromise;\n                function addLocalToIndex() {\n                    that.add(that.local);\n                }\n            },\n            initialize: function initialize(force) {\n                return !this.initPromise || force ? this._initialize() : this.initPromise;\n            },\n            add: function add(data) {\n                this.index.add(data);\n                return this;\n            },\n            get: function get(ids) {\n                ids = _.isArray(ids) ? ids : [].slice.call(arguments);\n                return this.index.get(ids);\n            },\n            search: function search(query, sync, async) {\n                var that = this, local;\n                local = this.sorter(this.index.search(query));\n                sync(this.remote ? local.slice() : local);\n                if (this.remote && local.length < this.sufficient) {\n                    this.remote.get(query, processRemote);\n                } else if (this.remote) {\n                    this.remote.cancelLastRequest();\n                }\n                return this;\n                function processRemote(remote) {\n                    var nonDuplicates = [];\n                    _.each(remote, function(r) {\n                        !_.some(local, function(l) {\n                            return that.identify(r) === that.identify(l);\n                        }) && nonDuplicates.push(r);\n                    });\n                    async && async(nonDuplicates);\n                }\n            },\n            all: function all() {\n                return this.index.all();\n            },\n            clear: function clear() {\n                this.index.reset();\n                return this;\n            },\n            clearPrefetchCache: function clearPrefetchCache() {\n                this.prefetch && this.prefetch.clear();\n                return this;\n            },\n            clearRemoteCache: function clearRemoteCache() {\n                Transport.resetCache();\n                return this;\n            },\n            ttAdapter: function ttAdapter() {\n                return this.__ttAdapter();\n            }\n        });\n        return Bloodhound;\n    }();\n    return Bloodhound;\n});"]}